<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/touchgfx-hal-development/touchgfx-al-development-introduction">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/ja/opensearch.xml">
<script src="/4.21/ja/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">TouchGFX AL（抽象化レイヤ）開発の概要 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/ja/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/ja/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TouchGFX AL（抽象化レイヤ）開発の概要 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/ja/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/ja/assets/css/styles.a3789d89.css">
<link rel="preload" href="/4.21/ja/assets/js/runtime~main.657bbb12.js" as="script">
<link rel="preload" href="/4.21/ja/assets/js/main.5ba987b5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">メイン･コンテンツまでスキップ</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/ja/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/ja/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/ja/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">日本語</a><ul class="dropdown__menu"><li><a href="/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">日本語</a></li><li><a href="/4.21/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/ja/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">コミュニティ</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="上へスクロールしてもどる" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ja/docs/category/introduction">概要</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;概要&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ja/docs/category/basic-concepts">基本概念</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;基本概念&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/ja/docs/development/development-introduction">開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/development/hardware-selection/hardware-selection-introduction">ハードウェアの選択</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;ハードウェアの選択&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/development/board-bring-up/board-introduction">ボード立ち上げ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;ボード立ち上げ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL（抽象化レイヤ）開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;TouchGFX AL（抽象化レイヤ）開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-architecture">抽象化レイヤ･アーキテクチャ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/category/generator-user-guide">Generator User Guide</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;Generator User Guide&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/category/scenarios">シナリオ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;シナリオ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/development/ui-development/ui-development-introduction">UI開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;UI開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/ja/docs/category/scenarios-2">シナリオ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;シナリオ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ja/docs/category/miscellaneous-1">その他</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;その他&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ja/docs/category/tutorials">チュートリアル</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;チュートリアル&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/ja/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ja/docs/category/resources">リソース</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;リソース&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/ja/docs/development/development-introduction"><span itemprop="name">開発</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TouchGFX AL（抽象化レイヤ）開発</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>TouchGFX AL（抽象化レイヤ）開発の概要</h1></header><div class="figure noshadow"><a href="/4.21/ja/img/development/touchgfx-hal-development/activities-selected-002.webp" target="_blank"><img width="600" src="/4.21/ja/img/development/touchgfx-hal-development/activities-selected-002.webp"></a><p>プロジェクト作業</p></div><p>The TouchGFX Abstraction Layer (AL), in a TouchGFX application, is the software component that sits between the Board Initialization Code, developed during the Board Bring-Up phase, and the TouchGFX Engine. Its main task is to tie together the Engine with the underlying hardware and operating system. This is done by abstracting the specifics of the underlying hardware and OS such that it can be treated in a unified way by the Engine.</p><p>AL(抽象化レイヤ) は、ハードウェア抽象化レイヤ(HAL) とオペレーティング･システム抽象化レイヤ(OSAL) という2つの異なる部分で構成されます。</p><div class="figure noshadow"><a href="/4.21/ja/img/development/touchgfx-hal-development/components-selected-002.webp" target="_blank"><img width="600" src="/4.21/ja/img/development/touchgfx-hal-development/components-selected-002.webp"></a><p>プロジェクト･コンポーネント</p></div><p>In this section you will get a general introduction to the principles and responsibilities of the abstraction layer and how it interacts with the TouchGFX Engine.</p><p>You will also get an introduction to the TouchGFX Generator. The TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is <em>the</em> primary tool for the creation of the Abstraction Layer. It is an STM32CubeMX Additional-Software component that helps developers configure the TouchGFX AL to run on their hardware platform. Based on existing STM32CubeMX settings and user inputs, TouchGFX Generator will generate the files required to configure a working TouchGFX application. They include files for TouchGFX HAL, TouchGFX OSAL and TouchGFX Configuration.</p><p>In the following sections you will get an understanding of the general architecture of the TouchGFX AL. You will also find a <em>User Guide</em> on how to use TouchGFX Generator inside STM32CubeMX. Useful scenarios are also shown to help you with common use cases.</p><section class="row"><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-architecture"><h2 class="text--truncate cardTitle_rnsV" title="抽象化レイヤ･アーキテクチャ">📄️<!-- --> <!-- -->抽象化レイヤ･アーキテクチャ</h2></a></article><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/ja/docs/category/generator-user-guide"><h2 class="text--truncate cardTitle_rnsV" title="Generator User Guide">🗃️<!-- --> <!-- -->Generator User Guide</h2><p class="text--truncate cardDescription_PWke" title="6個のアイテム">6個のアイテム</p></a></article><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/ja/docs/category/scenarios"><h2 class="text--truncate cardTitle_rnsV" title="シナリオ">🗃️<!-- --> <!-- -->シナリオ</h2><p class="text--truncate cardDescription_PWke" title="7個のアイテム">7個のアイテム</p></a></article></section><h2 class="anchor anchorWithStickyNavbar_LWe7" id="responsibilities-of-the-abstraction-layer">抽象化レイヤの役割<a class="hash-link" href="#responsibilities-of-the-abstraction-layer" title="見出しに直接リンク">​</a></h2><p>「基本概念」の章の「<a href="/4.21/ja/docs/basic-concepts/rendering">メイン･ループ</a>」セクションで説明したように、TouchGFXエンジンには、以下の3つの基本ステップを実行するメイン･ループがあります。</p><ol><li>入力の収集(タッチ座標、ボタン)</li><li>シーン･モデルの更新</li><li>シーン･モデルのフレームバッファへのレンダリング</li></ol><p>この3つのステップによって、アプリケーションの現在の状態を反映するようにフレームバッファを更新するというTouchGFXエンジンの主な役割が果たされます。</p><p>ディスプレイへのフレームバッファ･データの実際の転送や外部入力の収集は、エンジンによって直接処理されるわけではなく、エンジンからTouchGFX ALに委譲されます。</p><p>メイン･ループはフレームバッファを繰り返し更新します。 すべてのフレームが転送され、ディスプレイに正しく表示されるようにするには、このプロセスをディスプレイの実際の更新頻度およびレディ状態と同期する必要があります。 同期が行われない場合、メイン･ループは更新を繰り返すので、転送される前にフレームバッファが上書きされてしまう可能性があります。 この同期を行うのはALの役割です。</p><p>TouchGFX ALは、フレームバッファ･メモリ領域とそのメモリ領域へのアクセスを制御する役割も担っています。 つまり、フレームバッファへのすべてのアクセスはALを介することになります。</p><p>TouchGFX ALの役割を詳しく説明すると以下のようになります。</p><table><thead><tr><th>役割</th><th>説明</th></tr></thead><tbody><tr><td>TouchGFXエンジンのメイン･ループとディスプレイ転送の同期</td><td>次のフレームが計算され、使用可能なフレームバッファにレンダリングされた時点で、エンジンのメイン･ループを停止して、新たにアセンブルされたフレームバッファがディスプレイに転送される前に上書きされないようにする必要があります。</td></tr><tr><td>タッチおよび物理ボタンのイベントのレポート</td><td>タッチ･イベントが発生したかどうかと、その座標をサンプリングします。 物理ボタンやそれに類似するものがアクティブ化されたかどうかをサンプリングします。 これらのイベントをエンジンにレポートします。 <br>その他の外部イベントは、別のメカニズムを通してTouchGFXアプリケーションに伝播されます。 詳細については、<a href="/4.21/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication">バックエンド通信に関するセクションを参照してください。</a></td></tr><tr><td>フレームバッファへのアクセスの同期</td><td>フレームバッファ･メモリはTouchGFX ALの担当範囲であり、ここにはさまざまなアクター(メイン･ループ･スレッドやDMAなど) がアクセスできるので、TouchGFX ALはこのメモリを保護する方法を提供する必要があります。</td></tr><tr><td>次に使用可能なフレームバッファ領域のレポート</td><td>ALは、次に更新可能なのは現在のフレームバッファのどの部分なのかを回答できる必要があります。 標準の2フレームバッファ設定では、常に1つのフレームバッファ全体がレンダリング専用になり、もう1つがディスプレイへの転送用になるため、これは常に完全なフレームバッファになります。 1つまたは部分的なフレームバッファ設定では、もっと複雑になります。</td></tr><tr><td>レンダリング操作の実行</td><td>シーン･モデルのレンダリング時に、エンジンのメイン･ループはALに部分的なレンダリングを行うように要求します。 特定のTouchGFX AL実装では、基盤となるハードウェアを利用してグラフィック･プリミティブのレンダリングを行います。 一例としては、Chrom-ARTグラフィック･アクセラレータによるマイクロコントローラ上でのビットマップのレンダリングが挙げられます。 TouchGFXには、すべての使用可能なプラットフォームに対して最適化されたレンダリング手法が組み込まれているので、カスタマイズの必要はありません。</td></tr><tr><td>ディスプレイへのフレームバッファの転送処理</td><td>エンジンはALに、転送の必要があるのはどのフレームバッファのどの部分なのかを通知します。 ALはこの転送を開始して、最終的にはピクセルを物理ディスプレイ上に表示させる必要があります。</td></tr></tbody></table><p>TouchGFX ALはパッシブなソフトウェア･モジュールで、独自のスレッドやそれに類似するものを持たないため、TouchGFXエンジンのメイン･ループから呼び出された特定のフック(機能) または割込みを介してアクションを実行する必要があります。</p><p>使用可能な一連のフックと割込みを以下の図に示します。</p><div class="figure noshadow"><a href="/4.21/ja/img/development/touchgfx-hal-development/al-introduction/al-hooks-00.webp" target="_blank"><img src="/4.21/ja/img/development/touchgfx-hal-development/al-introduction/al-hooks-00.webp"></a><p>使用可能なフックと割込み</p></div><p>基盤となるハードウェアおよびオペレーシング･システムが与えられている場合に、ALの役割が果たされるようにこれらのフックを実装するかどうかは、AL開発者の判断に委ねられます。 役割をサポートするためにAL開発者が他の手段を必要とする場合、開発者は特定のポイントでアクティブ化するように割込みを設定できます。 この例としては、LTDC垂直同期割込みやハードウェア･タイマが挙げられます。 <em>ディスプレイ･レディ</em>割込みは、垂直同期割込みの例です。 これらの割込みの設定は、AL開発の一部と見なされることに注意してください。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-setup-two-framebuffers---mcu-with-ltdc">設定例: 2フレームバッファ - LTDC付きマイクロコントローラ<a class="hash-link" href="#example-setup-two-framebuffers---mcu-with-ltdc" title="見出しに直接リンク">​</a></h2><p>一般的な設定の一つは、2つのフレームバッファとLTDC付きマイクロコントローラによるものです。 各フックのALアクションは、この設定では主に次のようになります。</p><p>LTDC VSYNC割込みに反応するようにALを設定し、ディスプレイが新しいフレームを受信する準備ができるたびにI1が実行されるようにします。 これを使用してメイン･ループとディスプレイを同期します。</p><table><thead><tr><th>フックと割込み</th><th>アクション</th></tr></thead><tbody><tr><td>I1: ディスプレイ･レディ</td><td>これをトリガするには、LTDC VSYNC割込みを設定します。<br>メイン･ループをブロック解除し、前のフレームで準備されたフレームバッファのフレームバッファ転送を開始します。</td></tr><tr><td>H1: タッチおよび物理ボタンのイベントのレポート</td><td>タッチ･イベントまたは物理ボタンのクリックに関する情報を返します。</td></tr><tr><td>H2: 次に使用可能なフレームバッファ領域の取得</td><td>ダブル･バッファ設定を使用して、単に、現在ディスプレイに転送されていないフレームバッファの全領域を返します。</td></tr><tr><td>H3: レンダリング操作の実行</td><td>マイクロコントローラの機能によって異なります。 ハードウェア支援のレンダリング操作とそれ以外に対するソフトウェア･フォールバックを実行します。</td></tr><tr><td>H4: 領域レンダリングの完了</td><td>アクションなし</td></tr><tr><td>H5: レンダリング終了</td><td>メイン･ループをブロックします。</td></tr></tbody></table><p>この設定では、以下のような実行フローとなります。</p><div class="figure noshadow"><a href="/4.21/ja/img/development/touchgfx-hal-development/al-introduction/al-actions-00.webp" target="_blank"><img src="/4.21/ja/img/development/touchgfx-hal-development/al-introduction/al-actions-00.webp"></a><p>2つのフレームバッファとLTDC付きマイクロコントローラによる設定の実行フロー</p></div><p>これは、この設定のALの全体設計を示しています。 以降のセクションでは、抽象化レイヤの実装方法に詳しく踏み込んで説明します。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメント･ページのナビゲーション"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/ja/docs/development/board-bring-up/how-to/11-flash-loader"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">11. Flashローダ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-architecture"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">抽象化レイヤ･アーキテクチャ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#responsibilities-of-the-abstraction-layer" class="table-of-contents__link toc-highlight">抽象化レイヤの役割</a></li><li><a href="#example-setup-two-framebuffers---mcu-with-ltdc" class="table-of-contents__link toc-highlight">設定例: 2フレームバッファ - LTDC付きマイクロコントローラ</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/ja/common/terms-of-use.html">ご利用条件</a> | <a href="https://www.st.com/content/st_com/ja/common/privacy-policy.html">プライバシー･ポリシー</a> | <a href="/docs/miscellaneous/cookie-policy">Cookieポリシー</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">権利行使</a></div></div></div></footer></div></div>
<script src="/4.21/ja/assets/js/runtime~main.657bbb12.js"></script>
<script src="/4.21/ja/assets/js/main.5ba987b5.js"></script>
</body>
</html>