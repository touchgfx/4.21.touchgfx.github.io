<!doctype html>
<html lang="zh-TW" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-miscellaneous/known-issues">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/zh-TW/opensearch.xml">
<script src="/4.21/zh-TW/js/one-trust.js"></script>
<link rel="icon" href="/4.21/zh-TW/img/icons/icon-192x192.png">
<link rel="manifest" href="/4.21/zh-TW/manifest.json">
<meta name="theme-color" content="rgb(21, 142, 194)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/4.21/zh-TW/img/icons/icon-192x192.png">
<link rel="mask-icon" href="/4.21/zh-TW/img/icon.svg" color="rgb(21, 142, 194)">
<meta name="msapplication-TileImage" content="/4.21/zh-TW/img/icons/icon-192x192.png">
<meta name="msapplication-TileColor" content="#000">
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">已知問題 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/zh-TW/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/zh-TW/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/zh-TW/docs/miscellaneous/known-issues"><meta data-rh="true" name="docusaurus_locale" content="zh-TW"><meta data-rh="true" name="docsearch:language" content="zh-TW"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="已知問題 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/zh-TW/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/zh-TW/docs/miscellaneous/known-issues"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/miscellaneous/known-issues" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/miscellaneous/known-issues" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/miscellaneous/known-issues" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/miscellaneous/known-issues" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/miscellaneous/known-issues" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/miscellaneous/known-issues" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/zh-TW/assets/css/styles.56327e77.css">
<link rel="preload" href="/4.21/zh-TW/assets/js/runtime~main.fc0d5720.js" as="script">
<link rel="preload" href="/4.21/zh-TW/assets/js/main.2c9acb78.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">跳轉到主要內容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/zh-TW/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">繁體中文</a><ul class="dropdown__menu"><li><a href="/4.21/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/zh-TW/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/zh-TW/docs/miscellaneous/known-issues">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社區</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="滾動返回頂部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/introduction">介紹</a><button aria-label="切換可折疊邊欄類別“介紹”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/basic-concepts">基本概念</a><button aria-label="切換可折疊邊欄類別“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/development/development-introduction">開發</a><button aria-label="切換可折疊邊欄類別“開發”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/zh-TW/docs/category/miscellaneous-1">其他情況</a><button aria-label="切換可折疊邊欄類別“其他情況”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-TW/docs/miscellaneous/updating-to-a-new-touchgfx-version">更新至新的TouchGFX版本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-TW/docs/miscellaneous/getting-help">獲取幫助</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/zh-TW/docs/miscellaneous/known-issues">已知問題</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-TW/docs/miscellaneous/changelog">修訂紀錄</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-TW/docs/miscellaneous/3rd-party-components-in-touchgfx">TouchGFX中的協力廠商組件</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/tutorials">指導</a><button aria-label="切換可折疊邊欄類別“指導”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/zh-TW/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/resources">資源</a><button aria-label="切換可折疊邊欄類別“資源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>這是<!-- -->TouchGFX Documentation<!-- --> <b>4.21</b> 的文件，該版本不再被主動維護。</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="https://support.touchgfx.com/docs/miscellaneous/known-issues" target="_blank" rel="noopener noreferrer">最新版本</a></b>.</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="階層連結"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/zh-TW/docs/category/miscellaneous-1"><span itemprop="name">其他情況</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">已知問題</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">在當前頁面</button></div><div class="theme-doc-markdown markdown"><header><h1>已知問題</h1></header><p>本文列出了所有TouchGFX版本中已知存在的問題以及潛在的權宜措施。 此外，如果您需要執行任何特定的升級步驟才能將TouchGFX升級至特定版本，文中將會提到。 請注意，如果當前版本與最新版本之間隔了幾個版本，您需要執行所有版本的升級步驟，直至升級到最新版本。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4-21-0">TouchGFX 4.21.0<a class="hash-link" href="#touchgfx-4-21-0" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="widetextaction">WideTextAction<a class="hash-link" href="#widetextaction" title="直接連結到標題">​</a></h3><p>The definition of the enumeration WideTextAction in Types.hpp has been changed as it was misleading. If you are using WIDE_TEXT_WORDWRAP in TouchGFX 4.20 or earlier and expect to see an ellipsis (<!-- -->…<!-- -->), you must use WIDE_TEXT_WORDWRAP_ELLIPSIS in TouchGFX 4.21. See also <a href="/4.21/zh-TW/docs/development/ui-development/touchgfx-engine-features/texts-and-fonts#automatic-wrapping-of-long-text-lines">Text and Fonts</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiling-stm32u599-projects-with-iar">Compiling STM32U599 projects with IAR<a class="hash-link" href="#compiling-stm32u599-projects-with-iar" title="直接連結到標題">​</a></h3><p>When upgrading a TouchGFX project from version 4.20 or older project to TouchGFX 4.21 you will see a linking error in IAR.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Error[Li006]: duplicate definitions for &quot;HAL_CPU2D_CommandListCpltCallback&quot;; in &quot;...\Obj\nema_hal.o&quot;, and &quot;...\Obj\nema_hal_threadx.o&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Error[Li006]: duplicate definitions for &quot;nema_buffer_create&quot;; in &quot;...\Obj\nema_hal.o&quot;, and &quot;...\Obj\nema_hal_threadx.o&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The reason for this error is that the file TouchGFX/Target/generated/nema_hal_threadx.c has been renamed to TouchGFX/Target/generated/nema_hal.c. It was a bug to include the operating system in the filename. CubeMX creates a file with the new name while leaving the old file in place. Both files are compiled by IAR. The resolution is to remove the file TouchGFX/Target/generated/nema_hal_threadx.c.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="svg-drawing-on-stm32-with-neochrom">SVG drawing on STM32 with NeoChrom<a class="hash-link" href="#svg-drawing-on-stm32-with-neochrom" title="直接連結到標題">​</a></h3><p>SVG shapes with large coordinates may render incorrectly on targets with NeoChrom. This is due to a limitation in the NeoChrom library. The problem can arise either due to scaling up or due to large coordinates in the SVG itself.</p><p>The resolution is to insert a call to <em>nema_vg_handle_large_coords()</em>. A good place is in the function <em>touchgfx_components_init()</em> in <code>TouchGFX/target/generated/TouchGFXConfiguration.cpp</code>:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">touchgfx_components_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">nema_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">nema_vg_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">nema_vg_handle_large_coords</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: This solution comes with a slight performance decrease.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4-20-0">TouchGFX 4.20.0<a class="hash-link" href="#touchgfx-4-20-0" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="繪圖器介面變更">繪圖器介面變更<a class="hash-link" href="#繪圖器介面變更" title="直接連結到標題">​</a></h3><p>基於效能考量，AbstractPainter::render()方法已由<a href="/4.21/zh-TW/docs/api/classes/classtouchgfx_1_1_abstract_painter#function-paint">AbstractPainter::paint</a>取代。<br>
<!-- -->如果您實作自己的繪圖器類別，就需要改為此項新介面。 請參閱Canvas小工具<a href="/4.21/zh-TW/docs/development/ui-development/touchgfx-engine-features/canvas-widgets">一文</a>瞭解更多詳細資訊。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="繪圖器實作移往產生的檔案">繪圖器實作移往產生的檔案<a class="hash-link" href="#繪圖器實作移往產生的檔案" title="直接連結到標題">​</a></h3><p>在TouchGFX 4.20之中，用於繪製圓形、線條及其他形狀的軟體常式，已由架構程式碼移往CubeMX產生的程式碼。 這代表您將專案由TouchGFX 4.19.1 (或之前版本)升級為TouchGFX 4.20之後，就必須在CubeMX重新產生程式碼。 這項變動的原因，是為了在繪製圓形和線條時能夠使用圖形加速器DMA2D。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="指示說明">指示說明<a class="hash-link" href="#指示說明" title="直接連結到標題">​</a></h4><p>請在專案根資料夾尋找並開啟.ioc檔案：</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/project-root-ioc.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/project-root-ioc.webp"></a><p>專案IOC檔案</p></div><p>請在Software Packs Component Selector (套裝軟體元件選擇器)(alt-O)之中選擇TouchGFX 4.20：</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/xcube-tgfx-420-selected.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/xcube-tgfx-420-selected.webp"></a><p>選擇TouchGFX 4.20</p></div><p>關閉此對話方塊，並按下右上角的「Generate Code」(產生程式碼)。 現在前往TouchGFX Designer並重新產生程式碼(F4)。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="連結器錯誤">連結器錯誤<a class="hash-link" href="#連結器錯誤" title="直接連結到標題">​</a></h4><p>如果您的專案使用Circle小工具這類項目，且沒有重新產生程式碼，就會出現連結器錯誤。 錯誤會像是以下這樣(此為16bpp)：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Linking TouchGFX/build/bin/target.elf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB565.o): In function `touchgfx::PainterRGB565::paint(unsigned char*, short, short, short, short, unsigned char) const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(.text._ZNK8touchgfx13PainterRGB5655paintEPhssssh+0x1a): undefined reference to `touchgfx::paint::rgb565::lineFromColor(unsigned short*, unsigned int, unsigned long, unsigned char, unsigned long)&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB565.o): In function `touchgfx::PainterRGB565::tearDown() const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(.text._ZNK8touchgfx13PainterRGB5658tearDownEv+0x0): undefined reference to `touchgfx::paint::rgb565::tearDown()&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">collect2.exe: error: ld returned 1 exit status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>若為24bpp則是：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Linking TouchGFX/build/bin/target.elf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB888.o): In function `touchgfx::PainterRGB888::paint(unsigned char*, short, short, short, short, unsigned char) const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (.text._ZNK8touchgfx13PainterRGB8885paintEPhssssh+0x18): undefined reference to `touchgfx::paint::rgb888::lineFromColor(unsigned char*, unsigned int, unsigned long, unsigned char)&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB888.o): In function `touchgfx::PainterRGB888::tearDown() const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (.text._ZNK8touchgfx13PainterRGB8888tearDownEv+0x0): undefined reference to `touchgfx::paint::rgb888::tearDown()&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        collect2.exe: error: ld returned 1 exit status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>您在CubeMX重新產生程式碼時，遺漏的函數會產生並進入<code>TouchGFX/target/generated/STM32DMA.cpp</code>。</p><p>如果您的控制器沒有DMA2D (或是並未啟用)，CubeMX會將TouchGFX 4.19.1及之前版本使用的軟體常式納入其中。</p><p>如果您因故無法在CubeMX重新產生程式碼，可以將下列include插入應用程式的.cpp檔案中，以手動方式新增遺漏的函數：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/Paint.hpp&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/PaintRGB565Impl.hpp&gt; // 16bpp painting routines</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/PaintRGB888Impl.hpp&gt; // 24bpp painting routines</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用keil除錯stm32g0">使用Keil除錯STM32G0<a class="hash-link" href="#使用keil除錯stm32g0" title="直接連結到標題">​</a></h3><p>適用於STM32G0開發板的TouchGFX專案與X-NUCLEO-GFX01M1/2顯示模組，針對外部SPI Flash資料使用0x90000000的位址範圍。 這樣會中斷Keil除錯器，因為該除錯器啟動除錯工作階段時，會存取前述位址。 Keil會提供以下錯誤訊息：「Cannot access target. Shutting down debug session」(無法存取目標。關閉除錯工作階段)。</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/stm32g0-debugging-keil.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/stm32g0-debugging-keil.webp"></a><p>在Keil開始除錯工作階段</p></div><p>解決以上問題的方法，就是利用以下文字為除錯器建立init指令碼：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">load STM32G071_NUCLEO\STM32G071_NUCLEO.axf NOCODE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">g,main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOCODE選項會告知Keil不要載入程式碼； 這樣就可去除存取問題。</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/debug-ini.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/debug-ini.webp"></a><p>適用於Keil的除錯初始化指令碼</p></div><p>在除錯設定對話方塊中選擇檔案：</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/keil-debug-dialog.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/keil-debug-dialog.webp"></a><p>適用於Keil的除錯設定</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用keil編譯stm32u5及stm32l5專案">使用Keil編譯STM32U5及STM32L5專案<a class="hash-link" href="#使用keil編譯stm32u5及stm32l5專案" title="直接連結到標題">​</a></h3><p>使用CubeMx建立的Keil專案，其專案檔案中沒有DSP延伸標記。 由於TouchGFX程式庫具有DSP延伸標記集，因此與TouchGFX程式庫連結時會產生連結器錯誤。 連結器錯誤範例如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">STM32U575ZI_NUCLEO\STM32U575ZI_NUCLEO.axf: Error: L6366E: abstractpartition.o attributes are not compatible with the provided attributes.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Object abstractpartition.o contains Build Attributes that are incompatible with the provided attributes.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tag_DSP_extension = This code was permitted to use Thumb DSP functions as an optional architecture extension above the base architecture as indicated by Tag_CPU_arch (=1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>解決這項問題的方法，就是在.uvprojx專案檔案(位於/Project/Targets/Target/TargetOption/TargetCommonOption/Cpu XML-element)中新增DSP標記：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Targets</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Target</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STM32U575ZI_NUCLEO</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">TargetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ToolsetNumber</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">0x4</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ToolsetNumber</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ToolsetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">ARM</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">ADS</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ToolsetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">pCCUsed</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">6120000</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">V6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">\ARMCLANG</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">pCCUsed</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">uAC6</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">uAC6</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetOption</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetCommonOption</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Device</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STM32U575ZITx</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Device</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Vendor</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STMicroelectronics</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Vendor</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PackID</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">Keil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">STM32U5xx_DFP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">2.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">PackID</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PackURL</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.keil.com/pack/&lt;/PackURL&gt;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">IRAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0x20000000</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0x200BFFFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">IROM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0x08000000</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0x81FFFFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CLOCK</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">8000000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">FPU3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SFPU</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CPUTYPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Cortex-M33&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> ELITTLE TZ DSP</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">FlashUtilSpec</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">FlashUtilSpec</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="logonserver環境變數">LOGONSERVER環境變數<a class="hash-link" href="#logonserver環境變數" title="直接連結到標題">​</a></h3><p>我們發現TouchGFX在部分電腦的執行速度非常慢(例如「執行模擬器」沒有動作持續30秒)。 將環境變數LOGONSERVER設定為空白值可能有助於改善這項問題。</p><p>在Bash中的指令如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export LOGONSERVER=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4-19-0">TouchGFX 4.19.0<a class="hash-link" href="#touchgfx-4-19-0" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stm32cubemx-code-generation-with-mjpeg-video-on-h7">STM32CubeMX code generation with MJPEG Video on H7<a class="hash-link" href="#stm32cubemx-code-generation-with-mjpeg-video-on-h7" title="直接連結到標題">​</a></h3><p>When generating code with MJPEG Video on e.g. an STM32H750 with STM32CubeMX 6.3.0 or earlier, unfortunately, the code to configure the MDMA to the MDMA handlers, as shown in <a href="/4.21/zh-TW/docs/development/touchgfx-hal-development/scenarios/scenarios-video-decoding#stm32h750-dk">Video Decoding</a>, is missing and developers must add the highlighted user code manually:</p><div class="code-header"><div><h5>Core\Src\stm32h7xx_hal_msp.c</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_JPEG_MspInit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">JPEG_HandleTypeDef</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> hjpeg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hjpeg</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">Instance</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain">JPEG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN JPEG_MspInit 0 */</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">     hmdma_jpeg_infifo_th</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> MDMA_REQUEST_JPEG_INFIFO_TH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">     hmdma_jpeg_outfifo_th</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> MDMA_REQUEST_JPEG_OUTFIFO_TH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END JPEG_MspInit 0 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用字體排印的新方法">使用字體排印的新方法<a class="hash-link" href="#使用字體排印的新方法" title="直接連結到標題">​</a></h3><p>從TouchGFX 4.18.1到TouchGFX 4.19.0，字體排印的使用發生了變化。 現在，字體排印有一個預設設置和零個或多個特定語言設置。</p><p>在<a href="/4.21/zh-TW/docs/development/ui-development/designer-user-guide/texts-view">設計器指南</a>中瞭解更多相關資訊</p><p>文字特定的方向和字體排印不再是一個選項，這些選項已轉移至新的預設設置和特定語言設置中。 這項新功能會對使用該功能的專案生成的程式碼產生影響。 文字轉換器將為預設設置生成一個字體id，並為每種特定語言設置生成一個id。 根據特定語言設置生成的字體id將被自動命名，參見以下範例。</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/text-specific-direction.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/text-specific-direction.webp"></a><p>在TouchGFX 4.18中設置特定的文字方向和字體排印</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="範例">範例：<a class="hash-link" href="#範例" title="直接連結到標題">​</a></h4><ul><li>自動生成的字體id：HEADLINE</li><li>預設字體排印id：JPN</li></ul><p>在<code>generated/fonts/include/fonts/ApplicationFontProvider.hpp</code>中生成兩個字體ID：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TypographyFontIndex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">FontId HEADLINE </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">FontId HEADLINE_AUTO_GENERATED_FOR_JPN </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="升級到4190時自動生成的字體排印">升級到4.19.0時自動生成的字體排印<a class="hash-link" href="#升級到4190時自動生成的字體排印" title="直接連結到標題">​</a></h4><p>如前所述，文字特定的方向和字體排印不再是一個選項。 由於功能上的這一變化，在升級舊版本時，可能會生成具有預設和特定語言設置的新字體排印。 您可以通過id來識別這些自動生成的字體排印。 文字方向作為尾碼或A-Z範圍內的字母：</p><ul><li>Headline_LTR</li><li>PosterText_RTL</li><li>Title_A</li><li>ButtonText_B</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="在使用者程式碼中引用字體id">在使用者程式碼中引用字體id<a class="hash-link" href="#在使用者程式碼中引用字體id" title="直接連結到標題">​</a></h4><p>如果在使用者程式碼中引用字體id，則可能需要對其進行更新。 當字體id不是通過符號而是通過值引用的情況下，會有出錯的風險，因為在升級期間字體id可能會更改。 建議始終通過符號引用字體id，即：用<code>TypographyFontIndex::HEADLINE</code>而非<code>0</code>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="將libjpeg與armclang結合使用">將LibJPEG與ARMCLANG結合使用<a class="hash-link" href="#將libjpeg與armclang結合使用" title="直接連結到標題">​</a></h3><p>在CubeMX中選擇了LibJPEG中介軟體的ARMCLANG專案無法運行。 ARMCLANG啟用半託管，因為LibJPEG引用libc檔函數（如：fopen）。<br>
<!-- -->半託管使應用程式在啟動期間等待與半託管感知調試器連接。<br>
<!-- -->解決此問題的一種方法是取消兩個檔中對JFILE的定義來刪除對LibJPEG中fopen的引用：<code>LibJPEG/source/jdatasrc.c</code> 和 <code>LibJPEG/source/jdatadst.c</code>:</p><div class="code-header"><div><h5>LibJPEG/source/jdatasrc.c</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&quot;jerror.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">undef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Expanded data source object for stdio input */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifdef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="code-header"><div><h5>LibJPEG/source/jdatadst.c</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&quot;jerror.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">undef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifndef</span><span class="token macro property"> </span><span class="token macro property expression">HAVE_STDLIB_H       </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">/* &lt;stdlib.h&gt; should declare malloc(),free() */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="h750b-discovery上的mjpeg影片">H750B Discovery上的MJPEG影片<a class="hash-link" href="#h750b-discovery上的mjpeg影片" title="直接連結到標題">​</a></h3><p>H750B Discovery板使用YCbCr影片資料的硬體解碼。 TouchGFX為該板提供的程式碼中的一個錯誤導致某些影片出現可見瑕疵。<br>
<!-- -->解決方案是改為軟體解碼。 在某些情況下，也可以通過將影片的寬度更改幾個像素來解決問題。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="threadx組合語言程式文件">ThreadX組合語言程式文件<a class="hash-link" href="#threadx組合語言程式文件" title="直接連結到標題">​</a></h3><p>Keil IDE的ThreadX組合語言程式檔使用新的ARMCLANG V6組合語言程式語法。 某些固件包中提供的startup.s檔使用的是舊的ARMCC組合語言程式語法。  這意味著您必須將專案設置為使用ARMCLANG V6組合語言程式，然後針對startup_stm32xxx.s進行重寫:</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/keil-assembler.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/keil-assembler.webp"></a><p>取消選擇用於startup.s的ARMCLANG V6組合語言程式</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4-18-0">TouchGFX 4.18.0<a class="hash-link" href="#touchgfx-4-18-0" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="issues-with-cubemx-610-and-cubeprogrammer-26">CubeMX 6.1.0和CubeProgrammer 2.6的問題<a class="hash-link" href="#issues-with-cubemx-610-and-cubeprogrammer-26" title="直接連結到標題">​</a></h3><p>由於“C/C++編譯器” / “語言”選項的錯誤設置（從“自動”更改為“C++”導致編譯錯誤），CubeMX生成的版本CubeMX 6.1.0 EWARM專案不能與X-CUBE-TOUCHGFX一起使用。 此問題將在CubeMX 6.1.1中進行修正。 在此期間，將選項手動改回“自動”將解決編譯問題，但是會在CubeMX生成程式碼時恢復。</p><p>CubeProgrammer 2.6中與外部載入器（<code>.stldr</code>）參照方式相關的問題會損壞所有現有應用範本（AT）的Makefile，還會妨礙TouchGFX Designer中“運行目標”特性的正常工作。 此問題還擴展到基於最新AT版本的用戶專案。 應用範本將獲得更新以修復此問題，並將適用於CubeProgrammer 2.5和2.6。 如果您已有了不能與CubeProgrammer 2.6一起使用的基於AT的專案，您可以進行下列修改以添加支援。 在引用外部資料夾時，用戶必須從<code>bin</code>資料夾執行<code>STM32CubeProgrammer_CLI.exe</code>。 一般而言，指：</p><ul><li><code>cd</code>到STM32CubeProgrammer安裝資料夾的<code>bin</code>資料夾。</li><li>執行指令，通過對<code>.stldr</code>檔的<em>相對</em>參照對連接的目標硬體進行程式設計。</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@cd &quot;$(st_stm32cube_programmer_bin_path)&quot; &amp;&amp; ./$(stm_stm32cube_programmer_exe) -c port=SWD -d $(application_path)/$(binary_output_path)/target.hex -el $(stm32cubeLoader_relative_path) -hardRst</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">CubeProgrammer錯誤在2.10版中得到解決。</div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-touchgfx-format">新的.touchgfx格式<a class="hash-link" href="#new-touchgfx-format" title="直接連結到標題">​</a></h3><p>從TouchGFX 4.17.0到TouchGFX 4.18.0，.touchfgx檔的內容在兩個主要區域發生了重大改變。 這可能會導致一個全面更新的.touchfgx檔，只需使用TouchGFX Designer打開和保存.TouchGFX專案檔案。 主要變化在以下領域：</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-values-are-not-written-to-touchgfx">預設值不寫入 .touchgfx<a class="hash-link" href="#default-values-are-not-written-to-touchgfx" title="直接連結到標題">​</a></h4><p>具有預設值（例如框體偏移X=0，Y=0或黑色（紅色=0，綠色=0，藍色=0））的小工具參數之前被寫入.touchfgx文件；但在TouchGFX版本4.18.0中，這些值不會寫入。 這可能導致稍小一些的.touchgfx文件。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="removed-textentries-block">刪除了TextEntries塊<a class="hash-link" href="#removed-textentries-block" title="直接連結到標題">​</a></h4><p>SingleUseId已經被重命名，以包含亂數字和字母（而不是連續的數字），以便合併一個專案與幾個活躍的開發人員，因為新的一次性使用文字id不會獲得相同的id。 另外，. touchgfx中的“TextEntries”部分已被刪除，這可能會導致. touchgfx檔尺寸大大減少。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lcd16bpp-fillrect-and-lcd16bpp-drawglyph">LCD16bpp::fillRect與LCD16bpp::drawGlyph<a class="hash-link" href="#lcd16bpp-fillrect-and-lcd16bpp-drawglyph" title="直接連結到標題">​</a></h3><p>LCD16bpp中的fillRect和drawGlyph函數現在將完整的24位顏色（而不是縮減後的16位（RGB565）顏色）傳遞給DMA。 這可能會導致硬體（而不是模擬器）上出現錯誤的顏色，可以通過從CubeMX重新生成DMA類來修復。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="makefile-and-xlsx">Makefile和xlsx<a class="hash-link" href="#makefile-and-xlsx" title="直接連結到標題">​</a></h3><p>TouchGFX 4.18.0使用新的.xml格式（而不是以前使用的舊的.xlsx格式）來存儲文字和譯文。 這意味著Makefiles和visual studio專案中所有對&quot;text.xlsx&quot;的引用都應該改為&quot;text.xml&quot;。 TextConvert工具將識別這一點（即使舊的texts.xlsx文件存在而texts.xml不存在），並將texts.xlsx轉換為texts.xml（面向所有未來用途）。</p><p>要看到正常工作的新Makefile，只需使用TouchGFX Designer新建一個（空白）專案，並諮詢生成的Makefile（位於資料夾generated/simulator/gcc/Makefile中）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="textsxsd中的字體大小限制">texts.xsd中的字體大小限制<a class="hash-link" href="#textsxsd中的字體大小限制" title="直接連結到標題">​</a></h3><p>設計器用於驗證texts.xml的texts.xsd的字體大小限制為255。 如果字體大於255，您將在設計器中看到如下錯誤消息:</p><div class="figure"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/font-size-limit-xsd.webp" target="_blank"><img src="/4.21/zh-TW/img/miscellaneous/known-issues/font-size-limit-xsd.webp"></a><p>錯誤消息-字體大小限制</p></div><p>解決方法是關閉專案，將texts.xsd中的“字體大小”屬性從xs:unsignedByte更改為xs:unsignedInt，然後重新打開專案。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sdl2-linker-error-on-linux">Linux上的SDL2連結器錯誤<a class="hash-link" href="#sdl2-linker-error-on-linux" title="直接連結到標題">​</a></h3><p>現在只為Windows用戶而包括模擬器使用的SDL2庫。 Linux用戶必須自己安裝SDL2庫。 這是一個只需要執行一次的任務；而對於ubuntu，指令</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install libsdl2-dev libsdl2-image-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可安裝libsdl2和libsdl2-image，包括用於開發的標頭檔</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4-17-0">TouchGFX 4.17.0<a class="hash-link" href="#touchgfx-4-17-0" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="painters-no-longer-support-setalpha">繪圖工具不再支援setAlpha()<a class="hash-link" href="#painters-no-longer-support-setalpha" title="直接連結到標題">​</a></h3><p>出於性能方面的考慮，Canvas Widget Renderer（CWR）使用的繪圖工具不再支援alpha。 通過在有繪圖工具的畫布小部件上設置alpha，仍然可以達到效果。 一般而言，可以將下面這樣的程式碼：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改成這樣：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果之前將alpha應用於繪圖工具和畫布小部件，可以將這兩個alpha值相乘，然後除以255，如下所示：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painterAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">circleAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> 變成</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painterAlpha </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> circleAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者使用LCD::div255()而不是除以255。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-hal-class">使用HAL類<a class="hash-link" href="#using-the-hal-class" title="直接連結到標題">​</a></h3><p>在版本4.17.0之前，完全不使用HAL的TouchGFX框架中的多個檔案包含標頭檔touchgfx/hal/HAL.hpp。 這些不必要的引用已被清理，這可能導致用戶程式碼由於HAL不為編譯器所知而不進行編譯。 為了修正這個問題，只需包含HAL標頭檔，如下所示：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;touchgfx/hal/HAL.hpp&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者，Screen類有兩個新的函數getScreenWidth()和getScreenHeight()，用於給出螢幕尺寸。 這是獲取螢幕尺寸的推薦方式，可從Screen的任意子類（如Screen1View.cpp）直接呼叫。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fmc-display-interface-in-touchgfx-generator">TouchGFX Generator中的FMC顯示介面<a class="hash-link" href="#fmc-display-interface-in-touchgfx-generator" title="直接連結到標題">​</a></h3><p>當使用TouchGFX Generator中新的FMC顯示介面時，在用CubeMX 6.2.1生成時FMC存儲區的<em>記憶體偏移</em>將不正確（零）。 這會在CubeMX 6.3.0中修正，在發佈時，X-CUBE-TouchGFX需要的最低版本將跳至6.3.0而不是目前的6.2.1。 到那時，用戶可以在<code>TouchGFXGeneratedHAL.cpp</code>中輸入正確的FMC BANK存儲位址（將在重新生成時被覆蓋）。 如</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">FMC_BANK1_REG</span><span class="token macro property"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression keyword" style="font-style:italic">uint16_t</span><span class="token macro property expression"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">*</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0x60000000</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">FMC_BANK1_MEM</span><span class="token macro property"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression keyword" style="font-style:italic">uint16_t</span><span class="token macro property expression"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">*</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0x60000002</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>用戶還可以在<code>TouchGFXHAL.cpp</code>中全部重新定義它們。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="l8-images-in-16-24-or-32bpp-configurations">16-24或32bpp配置的L8映射<a class="hash-link" href="#l8-images-in-16-24-or-32bpp-configurations" title="直接連結到標題">​</a></h3><p>在載入L8映射的CLUT時，對<code>OSWrappers::taskYield()</code> 的呼叫被錯誤地引入STM32DMA類。 要解決此問題，用戶可以執行以下操作：</p><ol><li>選取到您的<code>Users/&lt;user name&gt;/STM32Cube/Repository/Packs/STMicroelectronics/X-CUBE-TOUCHGFX/4.17.0/CubeMX/templates/Target</code> 資料夾。</li><li>根據您的位元深打開相應的<code>dma\u Xbpp\u implementation\u tmp.ftl</code>文件</li><li>刪除或注釋<code>while ((READ_REG(DMA2D-&gt;FGPFCCR) &amp; DMA2D_FGPFCCR_START) != 0U)</code>迴圈中對 <code>OSWrappers::taskYield()</code>的呼叫，並從STM32CubeMX重新生成程式碼，以使用此修改的範本生成程式碼。</li></ol><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">READ_REG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">DMA2D</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">FGPFCCR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> DMA2D_FGPFCCR_START</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0U</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OSWrappers::taskYield();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4150">TouchGFX 4.15.0<a class="hash-link" href="#touchgfx-4150" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-support">支援MCU<a class="hash-link" href="#mcu-support" title="直接連結到標題">​</a></h3><p>雖然TouchGFX完全支援Cortex-M33，但是在CubeMX中添加支援前，當前CubeMX（v6.0.1）版本中不能啟用“套裝軟體”（包括TouchGFX Generator）。 對基於Cortex-M33的MCU禁用“Trust Zone”，從而將MCU限制在單內容，將允許您啟用TouchGFX Generator。 應在“用戶程式碼”區手動啟用TrustZone。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4140">TouchGFX 4.14.0<a class="hash-link" href="#touchgfx-4140" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="armclang-support">ARMCLANG支援<a class="hash-link" href="#armclang-support" title="直接連結到標題">​</a></h3><p>雖然TouchGFX現在為<em>Cortex-M0</em>、<em>Cortex-M4f</em>、<em>Cortex-M7</em>和<em>Cortex-M33</em>提供ARMCLANG（ARM編譯器v6.x）庫，CubeMX卻不能生成啟用ARMCLANG編譯器（ARM編譯器v6.x）的專案。 這要求希望在其專案中使用編譯器的使用者從Keil uVision中的專案選項中手動選擇編譯器。</p><p>如果從CubeMX內部配置FreeRTOS中介軟體，生成的任何使用ARMCC（ARM編譯器v5.x）的專案都將有與ARMCLANG不相容的FreeRTOS<em>可移植</em>文件；必須手動替換這些檔。 每當從CubeMX內部運行“生成程式碼”時，任何手動修改都會被覆蓋，最好持續控制專案版本（git等）以撤銷這些特定修改。</p><p>總結。 由於CubeMX只能生成ARM Compiler v5.x編譯器專案，因此用戶必須在每次從CubeMX生成程式碼時修改下列內容，除非能夠持續控制專案版本。</p><ol><li>在專案選項中選擇ARM Compiler v6.x。</li><li>連結ARMCLANG庫而不是ARMCC庫（通過CubeMX配置）。</li><li>如果從CubeMX內部配置FreeRTOS，則為了相容ARM Compiler v6.x，應從 <code>portable/GCC</code>資料夾而不是<code>portable/RVDS</code>（ARM Compiler v5.x的默認選擇）獲取FreeRTOS可移植檔。</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">工作流程<a class="hash-link" href="#workflow" title="直接連結到標題">​</a></h4><p>下列工作流程描述了如何從Keil uVision使用v6.x ARM Compiler以及CubeMX生成的專案和TouchGFX ARMCLANG庫。</p><ol><li>在Keil uVision中選擇ARMCLANG（v. 6.x）。</li></ol><div class="figure noshadow"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/armclang-support.webp" target="_blank"><img width="650" src="/4.21/zh-TW/img/miscellaneous/known-issues/armclang-support.webp"></a><p>ARMCLANG支援</p></div><ol start="2"><li><p>如果您從CubeMX配置FreeRTOS，CubeMX將生成錯誤的可移植檔並將您的專案配置為使用這些檔。 您必須用來自<a href="https://github.com/FreeRTOS/FreeRTOS-Kernel/tree/6199b72fbf57a7c5b3d7b195a3bd1446779314cd/portable/GCC%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%88%60port.c%60" target="_blank" rel="noopener noreferrer">https://github.com/FreeRTOS/FreeRTOS-Kernel/tree/6199b72fbf57a7c5b3d7b195a3bd1446779314cd/portable/GCC的文件（`port.c`</a> 和 <code>portmacro.h</code>）或下載FreeRTOS版本後從其中找到的檔來手動替換這些檔。</p><p>替換<code>port.c</code>： </p><div class="figure noshadow"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/keil-port-c.webp" target="_blank"><img width="250" src="/4.21/zh-TW/img/miscellaneous/known-issues/keil-port-c.webp"></a><p>port.c</p></div><p></p><p>將include路徑設置修改為包含<code>portable/GCC</code>資料夾中的<code>portmacro.h</code>（本例中以Cortex-M7為例）： </p><div class="figure noshadow"><a href="/4.21/zh-TW/img/miscellaneous/known-issues/keil-port-include.webp" target="_blank"><img width="600" src="/4.21/zh-TW/img/miscellaneous/known-issues/keil-port-include.webp"></a><p>可移植檔include路徑</p></div><p></p></li><li><p>“生成程式碼”期間的TouchGFX Designer生成後步驟將基於您選擇的編譯器版本自動插入正確的庫。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4130">TouchGFX 4.13.0<a class="hash-link" href="#touchgfx-4130" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bugs">錯誤<a class="hash-link" href="#bugs" title="直接連結到標題">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="font-converter">字體轉換器<a class="hash-link" href="#font-converter" title="直接連結到標題">​</a></h4><p>FontConverter工具將為字體中的規則包含的unicode生成字形像素資料，無論該字形是否用在應用中的實際文字中。 這可能導致數百萬位元組的額外字形像素資料。 在這裡可以找到不再為應用不使用的字形生成像素資料的新的FontConverter工具（Windows和Linux）：</p><ul><li><a href="http://sw-center-st-com.s3-eu-west-1.amazonaws.com/touchgfx/TouchGFX/Patches/4.13.0/fontconvert_fix.zip" target="_blank" rel="noopener noreferrer">fontconvert_fix.zip</a></li></ul><p>在4.13.0安裝的根目錄提取此檔將更新</p><p><code>touchgfx\framework\tools內部的fontconverter庫</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-compiler-support">額外編譯器支援<a class="hash-link" href="#additional-compiler-support" title="直接連結到標題">​</a></h3><p>用ARMCLANG編譯器（v6.12）構建的庫可以在這裡找到：</p><ul><li><a href="http://sw-center-st-com.s3-eu-west-1.amazonaws.com/touchgfx/TouchGFX/Patches/4.13.0/touchgfx_core_clang.zip" target="_blank" rel="noopener noreferrer">touchgfx_core_clang.zip</a></li></ul><p>在4.13.0安裝的根目錄提取此檔會將庫<code>touchgfx_core_clang.lib</code>放入內部。</p><p><code>touchgfx\lib\core\cortex_m7\Keil</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility">向後相容<a class="hash-link" href="#backwards-compatibility" title="直接連結到標題">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-features">棄用的特性<a class="hash-link" href="#deprecated-features" title="直接連結到標題">​</a></h4><p>刪除了下列棄用特性。 如果您在程式碼中引用了它們，您可能需要重新編寫應用的這些部分：</p><ul><li>棄用的特性<code>TRANSPARENT_COL</code></li><li><code>Drawable::getType()</code></li><li><code>HAL::blitSetTransparencyKey()</code></li><li><code>HAL::registerTextCache()</code></li><li><code>HAL::cacheTextString()</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="texturemapper-is-disabled-by-default">默認禁用TextureMapper<a class="hash-link" href="#texturemapper-is-disabled-by-default" title="直接連結到標題">​</a></h4><p>為了減少TouchGFX使用的程式碼空間，默認禁用TextureMapper。 TouchGFX designer將插入程式碼，以便在所有新專案中啟用紋理映射器。</p><p>如果將舊專案遷移至TouchGFX 4.13並更新至TouchGFX 4.13，將由TouchGFX Designer處理此問題。</p><p>如果是手動更新，則需要插入程式碼來啟用TextureMapper。 否則，將不會在螢幕上繪製任何TextureMapper。</p><p>從這裡閱讀更多內容：<a href="/4.21/zh-TW/docs/development/ui-development/designer-user-guide/config-view#framework-features">配置TouchGFX特性</a>。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hal-sdl1-incompatible">不相容HAL SDL1<a class="hash-link" href="#hal-sdl1-incompatible" title="直接連結到標題">​</a></h4><p>將兩個函數從TouchGFX庫程式碼移動到了<code>HALSDL2.cpp</code>。 這對於將<code>HALSDL2.cpp</code>用作Windows模擬器的HAL的應用而言並沒有分別。</p><p>如果您有舊應用（早於TouchGFX 4.8.0），則您的模擬器可能在使用HALSDL（非2）。 此模擬器HAL不再包含在TouchGFX中。 HALSDL缺失之前包含在TouchGFX庫中的兩個函數。 您需要將它們手動添加到<code>HALSDL.cpp</code>：</p><div class="code-header"><div><h5>HALSDL.cpp</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HWND consoleHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get handle of console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// No console window yet?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        HWND activeHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetActiveWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Remember which window is active</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">AllocConsole</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Allocate a new console</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        consoleHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get handle of console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        FILE</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONIN$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;r&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stdin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Redirect stdin/stdout/stderr to the new console</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONOUT$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stdout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONOUT$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">SwitchToThisWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">activeHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Switch back to the originally active window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">ShowWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> SW_SHOW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Show/hide it!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> va_list pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> va_list pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a console window, if window is visible.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Only print if we have a console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">vprintf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4123">TouchGFX 4.12.3<a class="hash-link" href="#touchgfx-4123" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility-1">向後相容<a class="hash-link" href="#backwards-compatibility-1" title="直接連結到標題">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="screen-transitions">螢幕轉換<a class="hash-link" href="#screen-transitions" title="直接連結到標題">​</a></h4><p>更早的版本在完成螢幕轉換後重繪整個螢幕。 此額外重繪在一些運行緩慢的平臺上導致了性能問題。 如果您出於某些原因需要此類重繪，則需要使螢幕的相關部分無效，如通過呼叫轉換到的螢幕的<code>Screen::afterTransition()</code>虛擬函數中的<code>container.invalidate()</code>的方式。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="binary-fonts">二進位字體<a class="hash-link" href="#binary-fonts" title="直接連結到標題">​</a></h4><p>由於字距調整資料現已包含在二進位字體中，因此修改了二進位字體的格式。 需重新生成二進位字體檔，原來的檔將無效。 根據Makefiles的設置方式，通常通過重新生成所有資產來完成（如<code>“make -f simulator/gcc/Makefile clean assets”</code>）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4110">TouchGFX 4.11.0<a class="hash-link" href="#touchgfx-4110" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility-2">向後相容<a class="hash-link" href="#backwards-compatibility-2" title="直接連結到標題">​</a></h3><p>在<code>touchgfx/framework/include/touchgfx/lcd/LCD.hpp</code>中，我們刪除了檔<code>touchgfx/hal/HAL.hpp</code>中一個在早期版本中誤插入的include函數。 這可能導致包含<code>LCD.hpp</code>並使用<code>HAL.hpp</code>內容的檔中發生編譯器錯誤。 解決方案是在檔中另外包含<code>touchgfx/framework/include/touchgfx/hal/HAL.hpp</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-4100">TouchGFX 4.10.0<a class="hash-link" href="#touchgfx-4100" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-from-49x">從4.9.x升級<a class="hash-link" href="#upgrading-from-49x" title="直接連結到標題">​</a></h3><p>從版本4.10.0開始，TouchGFX只在STM32 MCU上運行。</p><p>如需更新舊專案，您需要執行下列操作。</p><p>在應用啟動時添加下列突出顯示的程式碼，以便將正在STM32硬體上運行的情況通知TouchGFX。 合適位置是<code>BoardConfiguration.cpp</code>中<code>hw_init()</code>函數的結尾</p><div class="code-header"><div><h5>BoardConfiguration.cpp</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">hw_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Enable CRC engine for STM32 Lock check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">__HAL_RCC_CRC_CLK_ENABLE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility-3">向後相容<a class="hash-link" href="#backwards-compatibility-3" title="直接連結到標題">​</a></h3><p>刪除了未使用的檔<code>\touchgfx\framework\include\touchgfx\canvas_widget_renderer\RGBA8.hpp</code>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-updater-issue">專案更新器的問題<a class="hash-link" href="#project-updater-issue" title="直接連結到標題">​</a></h3><p>從TouchGFX Designer呼叫的IAR和Keil專案更新器不遵循在相應IDE中設置的自訂文件級別優化。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="textarea-and-chromart-dma2d">TextArea和ChromART（DMA2D）<a class="hash-link" href="#textarea-and-chromart-dma2d" title="直接連結到標題">​</a></h3><p>用ChromART渲染TextAreas（當TextArea是最頂端的元素/最後進行繪製時）導致影像緩衝的提前解鎖，繼而導致當前幀提前完成/傳輸到顯示器。 在TouchGFX呼叫<code>endFrame()</code>後，所有繪製操作（包括DMA操作）應已完成。 由於TextArea在如何適當地保護影像緩衝方面違反合約，即使從<code>endFrame()</code>返回後，仍然允許DMA操作繼續。</p><p>小部件的合約為：</p><ol><li>鎖定影像緩衝（返回指向影像緩衝的指標）。</li><li>在影像緩衝中繪製一些內容。 </li><li>解鎖框架緩衝區。</li></ol><p>或者，使用DMA操作，這種情況下將自動處理影像緩衝的同步。</p><p>在版本4.10.0中，如果是當前螢幕最頂端的元素（最後進行繪製），TextArea將兩個流程混合可能導致短時脈衝波干擾。 此問題可通過用下列<code>endFrame()</code>重寫手動保護<code>endFrame()</code>來修正（基於F4 HAL）。 此舉確保在仍在處理ChromART操作時<code>endFrame()</code>不返回。  </p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">STM32F4HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">endFrame</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isDMARunning</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">tryTakeFrameBufferSemaphore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">endFrame</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製程式碼到剪貼板" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-490">TouchGFX 4.9.0<a class="hash-link" href="#touchgfx-490" title="直接連結到標題">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-from-480">從4.8.0升級<a class="hash-link" href="#upgrading-from-480" title="直接連結到標題">​</a></h3><p>隨著應用範本（從實質上將開發板支援包與核心框架分離開來）的引入，我們從版本4.9.0的<em>touchgfx</em>資料夾中刪除了許多底層驅動和其他檔。 這些檔案現在由應用範本提供。 但是，這意味著您不能通過只替換touchgfx資料夾升級到4.9.0，那樣做可能導致一些BSP檔案缺失。 相反地，TouchGFX Designer能夠自動執行升級。 可通過兩種不同的方式升級，您需要選擇一種最適合您的方式。</p><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content">請確保升級前進行了專案備份。</div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-retain-original-file-structure">方法1：保留原始檔結構<a class="hash-link" href="#method-1-retain-original-file-structure" title="直接連結到標題">​</a></h3><p>要執行此方法，只需在新的TouchGFX Designer 4.9.0中打開專案。 TouchGFX Designer將詢問您是否要升級，在點擊“確定”後，TouchGFX Designer將應用必要修改。 TouchGFX Designer將執行下列操作：</p><ol><li>將新的壓縮過的touchgfx資料夾解壓到應用中，並修改TouchGFX路徑以與之匹配。</li><li>下載並解壓所有已從touchgfx資料夾中刪除的檔案，因此專案仍然可以編譯。</li></ol><p>此方法幾乎會讓一切保持原樣，如果原有檔案結構適合您的專案，則這是最輕鬆的選擇。 此方法的主要缺點是不會有圖像轉換器加速（通過操作影像檔案夾而不是單個檔案）。 但是，您可以手動修改makefile，以便使用此方法。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-import-into-new-template">方法2：導入到新的範本<a class="hash-link" href="#method-2-import-into-new-template" title="直接連結到標題">​</a></h3><p>您可以使用此方法將專案轉換到基於新範本的檔案結構中。 為此，您必須首先讓Designer使用上面的方法1升級專案。 然後，使用合適的應用範本（模擬器或與您的評估板匹配的應用範本）新建專案。 在Designer中打開此新專案後，轉至頂部功能表並點擊“編輯-&gt;導入GUI”。 在對話方塊中指定專案的.touchgfx文件。 Designer會自動將所有UI檔（包括資產）導入新建的專案。 如果在gui資料夾之外增加了額外的程式碼，您需要將這些檔案手動複製到新專案。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-3-manual-upgrade-without-designer">方法3：手動升級（無TouchGFX Designer）<a class="hash-link" href="#method-3-manual-upgrade-without-designer" title="直接連結到標題">​</a></h3><p>如果不使用TouchGFX Designer，您可以用以下方式執行升級：</p><ol><li>用版本4.9.0的安裝資料夾中的資料夾替換touchgfx資料夾。</li><li>用版本4.9.0的安裝資料夾中的資料夾替換touchgfx資料夾。下載<a href="http://ftp.draupnergraphics.com/TouchGFX/Evaluation/4.9.0/Qll3iKK54AnJer7XRNm2/fw_delta_4.8.0_4.9.0.zip" target="_blank" rel="noopener noreferrer">此zip檔</a>並將其解壓到touchgfx資料夾，恢復刪除的檔案。</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件頁面導航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/zh-TW/docs/miscellaneous/getting-help"><div class="pagination-nav__sublabel">上一個</div><div class="pagination-nav__label">獲取幫助</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/zh-TW/docs/miscellaneous/changelog"><div class="pagination-nav__sublabel">下一個</div><div class="pagination-nav__label">修訂紀錄</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#touchgfx-4-21-0" class="table-of-contents__link toc-highlight">TouchGFX 4.21.0</a><ul><li><a href="#widetextaction" class="table-of-contents__link toc-highlight">WideTextAction</a></li><li><a href="#compiling-stm32u599-projects-with-iar" class="table-of-contents__link toc-highlight">Compiling STM32U599 projects with IAR</a></li><li><a href="#svg-drawing-on-stm32-with-neochrom" class="table-of-contents__link toc-highlight">SVG drawing on STM32 with NeoChrom</a></li></ul></li><li><a href="#touchgfx-4-20-0" class="table-of-contents__link toc-highlight">TouchGFX 4.20.0</a><ul><li><a href="#繪圖器介面變更" class="table-of-contents__link toc-highlight">繪圖器介面變更</a></li><li><a href="#繪圖器實作移往產生的檔案" class="table-of-contents__link toc-highlight">繪圖器實作移往產生的檔案</a></li><li><a href="#使用keil除錯stm32g0" class="table-of-contents__link toc-highlight">使用Keil除錯STM32G0</a></li><li><a href="#使用keil編譯stm32u5及stm32l5專案" class="table-of-contents__link toc-highlight">使用Keil編譯STM32U5及STM32L5專案</a></li><li><a href="#logonserver環境變數" class="table-of-contents__link toc-highlight">LOGONSERVER環境變數</a></li></ul></li><li><a href="#touchgfx-4-19-0" class="table-of-contents__link toc-highlight">TouchGFX 4.19.0</a><ul><li><a href="#stm32cubemx-code-generation-with-mjpeg-video-on-h7" class="table-of-contents__link toc-highlight">STM32CubeMX code generation with MJPEG Video on H7</a></li><li><a href="#使用字體排印的新方法" class="table-of-contents__link toc-highlight">使用字體排印的新方法</a></li><li><a href="#將libjpeg與armclang結合使用" class="table-of-contents__link toc-highlight">將LibJPEG與ARMCLANG結合使用</a></li><li><a href="#h750b-discovery上的mjpeg影片" class="table-of-contents__link toc-highlight">H750B Discovery上的MJPEG影片</a></li><li><a href="#threadx組合語言程式文件" class="table-of-contents__link toc-highlight">ThreadX組合語言程式文件</a></li></ul></li><li><a href="#touchgfx-4-18-0" class="table-of-contents__link toc-highlight">TouchGFX 4.18.0</a><ul><li><a href="#issues-with-cubemx-610-and-cubeprogrammer-26" class="table-of-contents__link toc-highlight">CubeMX 6.1.0和CubeProgrammer 2.6的問題</a></li><li><a href="#new-touchgfx-format" class="table-of-contents__link toc-highlight">新的.touchgfx格式</a></li><li><a href="#lcd16bpp-fillrect-and-lcd16bpp-drawglyph" class="table-of-contents__link toc-highlight">LCD16bpp::fillRect與LCD16bpp::drawGlyph</a></li><li><a href="#makefile-and-xlsx" class="table-of-contents__link toc-highlight">Makefile和xlsx</a></li><li><a href="#textsxsd中的字體大小限制" class="table-of-contents__link toc-highlight">texts.xsd中的字體大小限制</a></li><li><a href="#sdl2-linker-error-on-linux" class="table-of-contents__link toc-highlight">Linux上的SDL2連結器錯誤</a></li></ul></li><li><a href="#touchgfx-4-17-0" class="table-of-contents__link toc-highlight">TouchGFX 4.17.0</a><ul><li><a href="#painters-no-longer-support-setalpha" class="table-of-contents__link toc-highlight">繪圖工具不再支援setAlpha()</a></li><li><a href="#using-the-hal-class" class="table-of-contents__link toc-highlight">使用HAL類</a></li><li><a href="#fmc-display-interface-in-touchgfx-generator" class="table-of-contents__link toc-highlight">TouchGFX Generator中的FMC顯示介面</a></li><li><a href="#l8-images-in-16-24-or-32bpp-configurations" class="table-of-contents__link toc-highlight">16-24或32bpp配置的L8映射</a></li></ul></li><li><a href="#touchgfx-4150" class="table-of-contents__link toc-highlight">TouchGFX 4.15.0</a><ul><li><a href="#mcu-support" class="table-of-contents__link toc-highlight">支援MCU</a></li></ul></li><li><a href="#touchgfx-4140" class="table-of-contents__link toc-highlight">TouchGFX 4.14.0</a><ul><li><a href="#armclang-support" class="table-of-contents__link toc-highlight">ARMCLANG支援</a></li></ul></li><li><a href="#touchgfx-4130" class="table-of-contents__link toc-highlight">TouchGFX 4.13.0</a><ul><li><a href="#bugs" class="table-of-contents__link toc-highlight">錯誤</a></li><li><a href="#additional-compiler-support" class="table-of-contents__link toc-highlight">額外編譯器支援</a></li><li><a href="#backwards-compatibility" class="table-of-contents__link toc-highlight">向後相容</a></li></ul></li><li><a href="#touchgfx-4123" class="table-of-contents__link toc-highlight">TouchGFX 4.12.3</a><ul><li><a href="#backwards-compatibility-1" class="table-of-contents__link toc-highlight">向後相容</a></li></ul></li><li><a href="#touchgfx-4110" class="table-of-contents__link toc-highlight">TouchGFX 4.11.0</a><ul><li><a href="#backwards-compatibility-2" class="table-of-contents__link toc-highlight">向後相容</a></li></ul></li><li><a href="#touchgfx-4100" class="table-of-contents__link toc-highlight">TouchGFX 4.10.0</a><ul><li><a href="#upgrading-from-49x" class="table-of-contents__link toc-highlight">從4.9.x升級</a></li><li><a href="#backwards-compatibility-3" class="table-of-contents__link toc-highlight">向後相容</a></li><li><a href="#project-updater-issue" class="table-of-contents__link toc-highlight">專案更新器的問題</a></li><li><a href="#textarea-and-chromart-dma2d" class="table-of-contents__link toc-highlight">TextArea和ChromART（DMA2D）</a></li></ul></li><li><a href="#touchgfx-490" class="table-of-contents__link toc-highlight">TouchGFX 4.9.0</a><ul><li><a href="#upgrading-from-480" class="table-of-contents__link toc-highlight">從4.8.0升級</a></li><li><a href="#method-1-retain-original-file-structure" class="table-of-contents__link toc-highlight">方法1：保留原始檔結構</a></li><li><a href="#method-2-import-into-new-template" class="table-of-contents__link toc-highlight">方法2：導入到新的範本</a></li><li><a href="#method-3-manual-upgrade-without-designer" class="table-of-contents__link toc-highlight">方法3：手動升級（無TouchGFX Designer）</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2023 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/zh-TW/assets/js/runtime~main.fc0d5720.js"></script>
<script src="/4.21/zh-TW/assets/js/main.2c9acb78.js"></script>
</body>
</html>