<!doctype html>
<html lang="zh-TW" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/touchgfx-hal-development/touchgfx-al-development-introduction">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/zh-TW/opensearch.xml">
<script src="/4.21/zh-TW/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">TouchGFX AL 開發簡介 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/zh-TW/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/zh-TW/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction"><meta data-rh="true" name="docusaurus_locale" content="zh-TW"><meta data-rh="true" name="docsearch:language" content="zh-TW"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TouchGFX AL 開發簡介 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/zh-TW/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/zh-TW/assets/css/styles.2fc40eaa.css">
<link rel="preload" href="/4.21/zh-TW/assets/js/runtime~main.6fdbff36.js" as="script">
<link rel="preload" href="/4.21/zh-TW/assets/js/main.74f97115.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">跳轉到主要內容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/zh-TW/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">繁體中文</a><ul class="dropdown__menu"><li><a href="/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/zh-TW/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社區</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="滾動返回頂部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/introduction">介紹</a><button aria-label="切換可折疊邊欄類別“介紹”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/basic-concepts">基本概念</a><button aria-label="切換可折疊邊欄類別“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/zh-TW/docs/development/development-introduction">開發</a><button aria-label="切換可折疊邊欄類別“開發”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/development/hardware-selection/hardware-selection-introduction">硬體選擇</a><button aria-label="切換可折疊邊欄類別“硬體選擇”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/development/board-bring-up/board-introduction">開發板搭建</a><button aria-label="切換可折疊邊欄類別“開發板搭建”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL開發</a><button aria-label="切換可折疊邊欄類別“TouchGFX AL開發”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-architecture">抽象層架構</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/category/generator-user-guide">Generator User Guide</a><button aria-label="切換可折疊邊欄類別“Generator User Guide”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/category/scenarios">場景</a><button aria-label="切換可折疊邊欄類別“場景”" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/development/ui-development/ui-development-introduction">UI開發</a><button aria-label="切換可折疊邊欄類別“UI開發”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-TW/docs/category/scenarios-2">場景</a><button aria-label="切換可折疊邊欄類別“場景”" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/miscellaneous-1">其他情況</a><button aria-label="切換可折疊邊欄類別“其他情況”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/tutorials">指導</a><button aria-label="切換可折疊邊欄類別“指導”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/zh-TW/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-TW/docs/category/resources">資源</a><button aria-label="切換可折疊邊欄類別“資源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/zh-TW/docs/development/development-introduction"><span itemprop="name">開發</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TouchGFX AL開發</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">在當前頁面</button></div><div class="theme-doc-markdown markdown"><header><h1>TouchGFX AL 開發簡介</h1></header><div class="figure noshadow"><a href="/4.21/zh-TW/img/development/touchgfx-hal-development/activities-selected-002.webp" target="_blank"><img width="600" src="/4.21/zh-TW/img/development/touchgfx-hal-development/activities-selected-002.webp"></a><p>專案活動</p></div><p>The TouchGFX Abstraction Layer (AL), in a TouchGFX application, is the software component that sits between the Board Initialization Code, developed during the Board Bring-Up phase, and the TouchGFX Engine. Its main task is to tie together the Engine with the underlying hardware and operating system. This is done by abstracting the specifics of the underlying hardware and OS such that it can be treated in a unified way by the Engine.</p><p>AL由兩個不同的部分組成，分別為硬體抽象層（HAL）和作業系統抽象層（OSAL）。</p><div class="figure noshadow"><a href="/4.21/zh-TW/img/development/touchgfx-hal-development/components-selected-002.webp" target="_blank"><img width="600" src="/4.21/zh-TW/img/development/touchgfx-hal-development/components-selected-002.webp"></a><p>專案元件</p></div><p>In this section you will get a general introduction to the principles and responsibilities of the abstraction layer and how it interacts with the TouchGFX Engine.</p><p>You will also get an introduction to the TouchGFX Generator. The TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is <em>the</em> primary tool for the creation of the Abstraction Layer. It is an STM32CubeMX Additional-Software component that helps developers configure the TouchGFX AL to run on their hardware platform. Based on existing STM32CubeMX settings and user inputs, TouchGFX Generator will generate the files required to configure a working TouchGFX application. They include files for TouchGFX HAL, TouchGFX OSAL and TouchGFX Configuration.</p><p>In the following sections you will get an understanding of the general architecture of the TouchGFX AL. You will also find a <em>User Guide</em> on how to use TouchGFX Generator inside STM32CubeMX. Useful scenarios are also shown to help you with common use cases.</p><section class="row"><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-architecture"><h2 class="text--truncate cardTitle_rnsV" title="抽象層架構">📄️<!-- --> <!-- -->抽象層架構</h2></a></article><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/zh-TW/docs/category/generator-user-guide"><h2 class="text--truncate cardTitle_rnsV" title="Generator User Guide">🗃️<!-- --> <!-- -->Generator User Guide</h2><p class="text--truncate cardDescription_PWke" title="6個專案">6個專案</p></a></article><article class="col col--6 margin-bottom--lg"><a class="card padding--lg cardContainer_fWXF" href="/4.21/zh-TW/docs/category/scenarios"><h2 class="text--truncate cardTitle_rnsV" title="場景">🗃️<!-- --> <!-- -->場景</h2><p class="text--truncate cardDescription_PWke" title="7個專案">7個專案</p></a></article></section><h2 class="anchor anchorWithStickyNavbar_LWe7" id="responsibilities-of-the-abstraction-layer">抽象層的職責<a class="hash-link" href="#responsibilities-of-the-abstraction-layer" title="直接連結到標題">​</a></h2><p>如同在基本概念章節中的<a href="/4.21/zh-TW/docs/basic-concepts/rendering">主迴圈</a>部分所述，TouchGFX 引擎具有執行三個基本步驟的主迴圈。</p><ol><li>收集輸入信號（觸控座標、按鈕）</li><li>更新場景模型</li><li>將場景模型渲染到幀緩存</li></ol><p>這三個步驟確保了TouchGFX引擎的主要職責，即透過更新影像緩衝區來反映應用程式的當前狀態。</p><p>引擎並不直接處理影像緩衝區的資料到顯示器之間的實際傳輸以及對外部輸入信號的收集，而是引擎委託給TouchGFX AL來達成。</p><p>主迴圈將反復不斷地更新影像緩衝區的資料。 這個過程必須以「實際更新頻率」和「顯示器就緒狀態」保持同步，以確保所有圖框畫面均被傳輸並顯示在顯示器上。 如果二者之間不同步，則主迴圈將不斷更新且有可能在更新過程中影像緩衝區在傳輸之前被覆寫。 這項同步的工作由AL負責。</p><p>TouchGFX AL還負責控制影像緩衝區的記憶體區域及其存取。 這意味著影像緩衝區的所有存取都透過AL來完成。</p><p>具體而言，TouchGFX AL的職責為：</p><table><thead><tr><th>職責</th><th>描述</th></tr></thead><tbody><tr><td>將「TouchGFX引擎主迴圈」與「顯示傳輸」同步</td><td>當下一個圖框已完成計算並在可用的影像緩衝區中完成渲染算圖時，引擎主迴圈必須停止以確保影像緩衝區在被傳輸到顯示器之前不會被覆寫。</td></tr><tr><td>回報觸控及實體按鈕事件</td><td>以取樣的方式來確知觸控事件的發生及並取得其座標資訊。 透過取樣的方式來確定實體按鈕或類似的元件是否被啟動（activated）。 向引擎回報這些事件。 <br>要注意的是其它的外部事件是藉由不同的機制傳播到TouchGFX應用程式。 在<a href="/4.21/zh-TW/docs/development/ui-development/touchgfx-engine-features/backend-communication">後端通訊（backend communication）</a>章節有更多資訊。</td></tr><tr><td>同步影像緩衝區的存取</td><td>影像緩衝區記憶體是由TouchGFX AL所負責，由於會被其它執行單元（如主迴圈執行緒和DMA）使用，因此TouchGFX AL必須提供保護此記憶體的方式。</td></tr><tr><td>回報下一個可用的影像緩衝區</td><td>AL必須能回答當前的影像緩衝區有那一個部份可在下一個可用的影像緩衝區當中更新。 這在標準的雙影像緩衝配置中即為完整的影像緩衝區，因為在這種情況下一直有一個完整的影像緩衝區專門用於渲染算圖，另一個影像緩衝區用於顯示器的傳輸。 但在單一或是局部影像緩衝區的配置下情況就比較複雜。</td></tr><tr><td>執行渲染算圖（render）操作</td><td>在對場景模型（scene model）作渲染算圖（render）時，引擎主迴圈會要求AL渲染對應的部分。 有一個特定的TouchGFX AL實作會利用底層硬體來渲染圖元（graphic primitive）。 當中的範例是在帶有Chrom-ART圖形加速器的MCU上渲染點陣圖。 TouchGFX內含為所有可用平台所最佳化的渲染算圖方法，因此不需要做客製化。</td></tr><tr><td>影像緩衝區到影示器的傳輸處理</td><td>引擎會通知AL必須傳輸哪個影像緩衝區的哪一部分。 AL需要啟動此傳輸來確保像素最終出現在實體顯示器上。</td></tr></tbody></table><p>由於TouchGFX AL是一種被動軟體模組，沒有自己執行緒或類似的執行緒，因此它必須透過從TouchGFX引擎主迴圈呼叫特定的掛鉤（函式）或透過中斷來執行其操作。</p><p>可用的掛鉤和中斷集組如下所述。</p><div class="figure noshadow"><a href="/4.21/zh-TW/img/development/touchgfx-hal-development/al-introduction/al-hooks-00.webp" target="_blank"><img src="/4.21/zh-TW/img/development/touchgfx-hal-development/al-introduction/al-hooks-00.webp"></a><p>可用的掛鉤和中斷</p></div><p>由AL開發人員來實作這些掛鉤，以便在給定底層硬體和作業系統的條件下含蓋AL的職責。 如果AL開發人員需要其他方式來支援AL的職責，開發人員可以設置中斷以便在特定時刻啟動。 這方面的範例為透過「硬體計時器」和「LTDC垂直同步中斷」。 <em>I1: 顯示就緒</em>中斷是垂直同步中斷的一個範例。 要注意的是這些中斷的配置也是AL開發的一部份。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-setup-two-framebuffers---mcu-with-ltdc">範例設定：雙影像緩衝區–內建LTDC的MCU<a class="hash-link" href="#example-setup-two-framebuffers---mcu-with-ltdc" title="直接連結到標題">​</a></h2><p>具有LTDC的MCU的兩個影像緩衝區是常見的配置。 在此配置當中每個掛鉤的AL操作通常如下。</p><p>設定AL以回應LTDC VSYNC中斷，如此可讓顯示器每次準備好接收新的圖框（frame）時都能執行I1。 這用於將主迴圈與顯示之間的同步。</p><table><thead><tr><th>掛鉤和中斷</th><th>動作</th></tr></thead><tbody><tr><td>I1：顯示就緒</td><td>解除（unblock）TouchGFX引擎主迴圈（main loop）的阻塞狀態，<br>並啟動上一個已準備好的圖框影像緩衝區傳輸。</td></tr><tr><td>H1：回報觸控及實體按鈕事件</td><td>回傳有關觸控事件或點按實體按鈕的任何資訊</td></tr><tr><td>H2：獲取下一個可用的影像緩衝區</td><td>要使用雙緩衝區的配置，只需要回傳當前所有未傳輸至顯示器的影像緩衝區域</td></tr><tr><td>H3：執行渲染算圖操作</td><td>依MCU的性能， 執行由硬體輔助的渲染算圖，若無硬體的輔助則進行純軟體的算圖</td></tr><tr><td>H4：區域渲染完成</td><td>無操作</td></tr><tr><td>H5：渲染完成</td><td>擱置主迴圈</td></tr></tbody></table><p>這個設定提供以下執行流程：</p><div class="figure noshadow"><a href="/4.21/zh-TW/img/development/touchgfx-hal-development/al-introduction/al-actions-00.webp" target="_blank"><img src="/4.21/zh-TW/img/development/touchgfx-hal-development/al-introduction/al-actions-00.webp"></a><p>「使用兩個影像緩衝區」和「帶有LTDC的MCU」的設定下其執行流程</p></div><p>這裡描述了AL配置的整體設計。 以下各節深入介紹了如何實作抽象層。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件頁面導航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/zh-TW/docs/development/board-bring-up/how-to/11-flash-loader"><div class="pagination-nav__sublabel">上一個</div><div class="pagination-nav__label">11. 快閃記憶體下載</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/zh-TW/docs/development/touchgfx-hal-development/touchgfx-architecture"><div class="pagination-nav__sublabel">下一個</div><div class="pagination-nav__label">抽象層架構</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#responsibilities-of-the-abstraction-layer" class="table-of-contents__link toc-highlight">抽象層的職責</a></li><li><a href="#example-setup-two-framebuffers---mcu-with-ltdc" class="table-of-contents__link toc-highlight">範例設定：雙影像緩衝區–內建LTDC的MCU</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">保留所有權利 © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">使用條款</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">隱私權原則</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie政策</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">行使您的權利</a></div></div></div></footer></div></div>
<script src="/4.21/zh-TW/assets/js/runtime~main.6fdbff36.js"></script>
<script src="/4.21/zh-TW/assets/js/main.74f97115.js"></script>
</body>
</html>