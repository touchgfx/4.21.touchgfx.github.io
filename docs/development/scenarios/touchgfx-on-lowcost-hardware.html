<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/touchgfx-on-lowcost-hardware">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/opensearch.xml">
<script src="/4.21/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">TouchGFX on Low Cost Hardware | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TouchGFX on Low Cost Hardware | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/assets/css/styles.a3789d89.css">
<link rel="preload" href="/4.21/assets/js/runtime~main.64e244a5.js" as="script">
<link rel="preload" href="/4.21/assets/js/main.98cba5e9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/4.21/ko/docs/development/scenarios/touchgfx-on-lowcost-hardware" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/development/scenarios/touchgfx-on-lowcost-hardware" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/development/scenarios/touchgfx-on-lowcost-hardware" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/docs/development/development-introduction">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/hardware-selection/hardware-selection-introduction">Hardware Selection</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware Selection&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/board-bring-up/board-introduction">Board Bring Up</a><button aria-label="Toggle the collapsible sidebar category &#x27;Board Bring Up&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX AL Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/ui-development/ui-development-introduction">UI Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.21/docs/category/scenarios-2">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/docs/development/scenarios/touchgfx-on-lowcost-hardware">TouchGFX on Low Cost Hardware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/touchgfx-on-gpu2d">TouchGFX on NeoChrom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">Lowering Memory Usage with Partial Framebuffer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/using-non-memory-mapped-flash">Using Non-Memory Mapped Flash for Storing Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/using-serial-flash">Using Serial Flash for images and fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/fonts-in-unmapped-flash">Using Non-Memory Mapped Flash for Font Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/scenarios-change-pixelformat-bpp">Changing the Pixel Format of an Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/scenarios-create-at">Creating an TouchGFX Board Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/example-gpio">External Events as Triggers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/running-without-rtos">Running without an RTOS on a TouchGFX Board Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/scenarios/adding-files-to-stm32cubemx-projet">Adding files to STM32CubeMX project</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/development/development-introduction"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/category/scenarios-2"><span itemprop="name">Scenarios</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TouchGFX on Low Cost Hardware</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TouchGFX on Low Cost Hardware</h1></header><p>This section discusses how to use TouchGFX on low cost hardware with
limited amount of RAM and flash, no acceleration and &quot;slow&quot; SPI connection
to external flash and display.</p><p>We will try to give some advice on writing the best applications of
the given hardware.</p><p>Throughout this section we will use the TouchGFX board setup for the
STM32G071 Nucleo board with the X-Nucleo-GFX01M1 expansion board as
example hardware. The expansion board features a 16-bit display and a
serial flash.</p><div class="figure"><a href="/4.21/img/development/ui-development/scenarios/lowering-memory-usage-with-partial-framebuffer/g071-with-gfx01m1.webp" target="_blank"><img src="/4.21/img/development/ui-development/scenarios/lowering-memory-usage-with-partial-framebuffer/g071-with-gfx01m1.webp"></a><p>Nucleo-G071RB with X-Nucleo-GFX01M1 expansion board</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-overview">Hardware Overview<a class="hash-link" href="#hardware-overview" title="Direct link to heading">​</a></h2><p>The hardware setup in this kit consist of the STM32G071 MCU, a SPI NOR flash, a SPI display, and joystick button.</p><table><thead><tr><th><strong>Component</strong></th><th align="right"> </th></tr></thead><tbody><tr><td>MCU</td><td align="right">STM32G071RB</td></tr><tr><td>MCU RAM</td><td align="right">32 Kb</td></tr><tr><td>MCU Flash</td><td align="right">128 Kb</td></tr><tr><td>Display</td><td align="right">Displaytech DT022CTFT</td></tr><tr><td>Display resolution</td><td align="right">240 x 320</td></tr><tr><td>Display format</td><td align="right">16-bit RGB565</td></tr><tr><td>Display controller</td><td align="right">ILI9341V</td></tr><tr><td>Display connection</td><td align="right">SPI</td></tr><tr><td>Display connection speed</td><td align="right">32 MHz</td></tr><tr><td>NOR Flash</td><td align="right">Macronix MX25L6433F</td></tr><tr><td>NOR Flash size</td><td align="right">64 Mbit</td></tr><tr><td>NOR Flash connection speed</td><td align="right">32 MHz</td></tr></tbody></table><p>The display is connected to the SPI1 peripheral and the flash is
connected to the SPI2 peripheral. This allows the MCU to read data
from the flash while transmitting data to the display.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/g071-gfx01m1-architecture.webp" target="_blank"><img width="500px" src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/g071-gfx01m1-architecture.webp"></a><p>Nucleo-G071RB with X-Nucleo-GFX01M1 architecture</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gpio-allocation">GPIO Allocation<a class="hash-link" href="#gpio-allocation" title="Direct link to heading">​</a></h3><table><thead><tr><th><strong>Signal</strong></th><th><strong>GPIO Pin</strong></th></tr></thead><tbody><tr><td>Display CS</td><td>PB5</td></tr><tr><td>Display DCX</td><td>PB3</td></tr><tr><td>Display SCK</td><td>PA5</td></tr><tr><td>Display MOSI</td><td>PA7</td></tr><tr><td>Display TE</td><td>PA0</td></tr><tr><td>Flash CS</td><td>PB9</td></tr><tr><td>Flash SCK</td><td>PB13</td></tr><tr><td>Flash MOSI</td><td>PC3</td></tr><tr><td>Flash MISO</td><td>PC2</td></tr></tbody></table><p>The table above lists the GPIO allocation for the signals to the flash
and display. These signal can be monitored with a oscilloscope or
logic analyzer. This is very useful during debugging of
e.g. performance problems.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="starting-a-project">Starting a Project<a class="hash-link" href="#starting-a-project" title="Direct link to heading">​</a></h3><p>It is easy to start a project for the STM32G071RB Nucleo evaluation
kit in the TouchGFX Designer. Click on the &quot;Create New&quot; button
and search for STM32G071 Nucleo.  This board setup is developed
specifically for the Nucleo-G071RB kit with the X-Nucleo-GFX01M1
display shield.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/g071-start-new-project-4.17.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/g071-start-new-project-4.17.webp"></a><p>New project for Nucleo-G071RB</p></div><p>The TouchGFX board setup supports the NOR flash, the display, and the
buttons. The display can be used both in portrait and horizontal
mode.</p><p>The display orientation can be change in the TouchGFX Designer in the
<em>Config -&gt; Display</em> section:</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/portrait-4.17.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/portrait-4.17.webp"></a><p>Selecting portrait or horizontal display orientation</p></div><p>The display on the X-Nucleo-GFX01M1 shield is natively portrait
oriented (higher than wide), but it can easily be used with
horizontal orientation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="display-updates">Display Updates<a class="hash-link" href="#display-updates" title="Direct link to heading">​</a></h2><p>As mentioned above the display resolution is 240 x 320 pixels. A total
of 76.800 pixels or 153.600 bytes. The SPI connection between the MCU
and the display is running at 32 MHz. This allows us to transfer 4
MBytes/s or 2M pixels/s.</p><p>The refresh rate of the display is 76.1 Hz which gives us a frame time of 13.14 ms.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/display-te.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/display-te.webp"></a><p>Tearing effect signal from the display</p></div><p>This means that we have at most 13 ms to send data for the next
frame. In that time we can send 2.000.000 pixels/s / 76 fps = 26.280
pixels / frame or 34% of a full screen.
In practice we cannot sustain that transfer speed on the SPI bus
because of the protocol overhead so we cannot expect to send more than
approximately 30% of a full frame.</p><p>If the application updates more than that amount of pixels the
hardware cannot complete the transmission within the frame time. The
result is that the display will start showing the updated frame before
it is completely updated. The user will then in some cases see a mix
of the old frame and the new frame.</p><p>For some animations this is not noticeable to the user, for others the
result will be unacceptable.</p><p>We therefore recommend to keep the level of updates below the 30%
limit. E.g. by incrementally updating the frame step-by-step.</p><p>Because of this, it is generally better to expand an item on the
screen, than moving the item.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/star.webp" target="_blank"><img width="400" src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/star.webp"></a><p>Tearing effect signal from the display</p></div><p>When the star is moved to the right, all the pixels covered by the
star must be updated. When the star is expanded only the new pixels
must be updated. The pixels updated in previous frame remain
unchanged.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="drawing-speed">Drawing Speed<a class="hash-link" href="#drawing-speed" title="Direct link to heading">​</a></h3><p>The transmission to the display is running at maximum 32 MHz.</p><p>The serial flash can run at the same speed as the display
transmission. This means that the serial flash is fast enough to feed
bits to the display at maximum speed.</p><p>This is only achieved if the pixel format of an image in the flash is
RGB565. In this case is two bytes read from the flash equal to 1
pixel, which is also two bytes on the display.
If the pixel format in the flash is ARGB8888, we need to read double
the amount of data from the flash to produce a pixel on the display,
and the serial flash will not be able to keep up with the display.</p><p>When this happens we are not sending data to the display continuously
and it will not be possible to update all 30% of the display in a
frame. One possibility is to move the image to internal flash, another
of course to change the pixel format.</p><p>Other widgets are not bound by the speed of the flash. E.g. the Box
Widget, which draws a colored rectangle. This widget is of course very
fast and much faster than the display transmission. Other widgets like
Line and Circle uses much more CPU resources. These Widget are not
able to produce pixels in the speed they can be transmitted to the
display. Using these Widgets an application cannot expect to be able
to update 30% of the display in every frame.</p><p>Find about pixel rendering complexity <a href="/4.21/docs/basic-concepts/performance#the-complexity-of-rendering-the-pixels">here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-limitations-with-serial-flash">TouchGFX Limitations with Serial Flash<a class="hash-link" href="#touchgfx-limitations-with-serial-flash" title="Direct link to heading">​</a></h2><p>TouchGFX on STM32G0 with serial flash has a few limitations that the
application programmer must be aware of.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="texture-mapper">Texture Mapper<a class="hash-link" href="#texture-mapper" title="Direct link to heading">​</a></h3><p>The texture mapper widgets (Texture Mapper, Animation Texture Mapper,
Scalable Image) can not draw an image that is stored in the external
SPI flash. The reason is that it is not possible to get an acceptable
performance of e.g. image rotation with an image stored in a serial
flash.</p><p>To use an image with a texture mapper you must store the image in
internal flash or RAM. An image is easily stored in internal flash by
modifying the image configuration in TouchGFX Designer.</p><p>Go to the Images tab and select the image. In the right side of the
window, change the &quot;Section&quot; attribute to &quot;IntFlashSection&quot;.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/image-internal-4.17.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/image-internal-4.17.webp"></a><p>Placing an image in internal flash</p></div><p>The texture mapper code is too large to include in all projects. It is
therefore disabled pr. default for STM32G0 projects. This means that
you must enable the texture mapper before you can use it in your
STM32G0 projects.</p><p>Go to the &quot;Config&quot; tab, select &quot;Framework Features&quot;, and click the
relevant texture mapper or a group of texture mappers.</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/enabling-texture-mapper-4.17.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/enabling-texture-mapper-4.17.webp"></a><p>Enabling a texture mapper for a specific image format</p></div><p>It is also possible to temporarily move an image to RAM using the <a href="/4.21/docs/development/ui-development/touchgfx-engine-features/caching-bitmaps">Bitmap Cache</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitmap-painter">Bitmap Painter<a class="hash-link" href="#bitmap-painter" title="Direct link to heading">​</a></h3><p>Line, Circle, and Dynamic Graph widgets can be colored with an
image. This is not possible with images located in the SPI
flash. Images used with these widgets must be placed in internal flash
or RAM.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="l8-palette">L8 Palette<a class="hash-link" href="#l8-palette" title="Direct link to heading">​</a></h3><p>Images in L8 format can be used on hardware with a serial flash. The
limitation is that the palette data must be in the internal flash
(also for performance reasons).</p><p>The palette can be moved to internal flash by changing the &quot;Extra
Section&quot; to &quot;IntFlashSection&quot; in the TouchGFX Designer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="drivers">Drivers<a class="hash-link" href="#drivers" title="Direct link to heading">​</a></h2><p>The TouchGFX board setup is created using the TouchGFX Generator. Read
more about the Generator
<a href="/4.21/docs/development/touchgfx-hal-development/generator-how-to/enabling-touchgfx-generator">here</a>. The
TouchGFX Generator generates a HAL layer that links the TouchGFX
framework with a set of low-level drivers (already implemented in this
TouchGFX board setup). The low-level drivers for this application
template are located in the <code>Core/Src</code> folder in your project.</p><p>The drivers are in 3 files:</p><table><thead><tr><th><strong>Driver</strong></th><th><strong>File</strong></th></tr></thead><tbody><tr><td>Display</td><td>Core/Src/MB1642BDisplayDriver.c</td></tr><tr><td>Flash</td><td>Core/Src/MB1642BDataReader.c</td></tr><tr><td>Buttons</td><td>Core/Src/MB1642BButtonController.cpp</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="display">Display<a class="hash-link" href="#display" title="Direct link to heading">​</a></h3><p>The display uses a fairly standard SPI protocol. A number of registers
is the display can be written to configure the display. The chip select
is asserted when data is transmitted to the display. An extra GPIO,
DCX, is used to differentiate command bytes from data bytes.</p><p>The driver uses a DMA channel to send display pixel data. This allows
the transmission to run while the MCU is calculating pixels. An DMA
complete interrupt is used to free the memory transmitted for reuse in
a future drawing and to restart the transmission if new data is
already available.</p><p>Configuration data is not send with DMA, because the CS and CDX pins
must be toggled between and in the small configuration packages
according to the protocol of this display.</p><p>The driver uses the SPI in 8 bit mode when sending configuration data,
but changes to 16-bit mode when transmitting the pixel data. The
reason for this is that the MCU memory is read in little endian
mode. A pixel in RGB565 format is stored in RAM with the low byte (G
and B) first and the high byte (R and G) second. This order is
preserved when the 8-bit SPI is reading the memory for
transmission. When the SPI is in 16-bit mode, the data is read as
16-bit RGB565 from memory and transmitted in correct order for the
display.</p><p>A driver not using 16-bit DMA must swap the bytes in a pixel before
transmitting.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="initialization">Initialization<a class="hash-link" href="#initialization" title="Direct link to heading">​</a></h4><p>The display initialization is found in the function <code>MB1642BDisplayDriver_DisplayInit(void)</code></p><p>The driver sends 6 commands to the display which follows the recommended power on sequence:</p><ol><li>Exit Sleep Mode (11h)</li><li>Enter Normal Mode (13h)</li><li>Set Memory Access Control (36h) with MX and BGR bits set</li><li>Set Pixel Format (3Ah) with format 16 bits</li><li>Tearing Effect Line On (35h)</li><li>Set Tear Scanline (44h) with line = 0</li></ol><p>The driver sleeps for 100 ms between these command.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tearing-effect">Tearing Effect<a class="hash-link" href="#tearing-effect" title="Direct link to heading">​</a></h4><p>The Tearing Effect (TE) signal from the display is very important. It
allows the application to synchronize the update of the display memory
correctly with the display refresh rate. This helps the application to
avoid tearing on the display. The display asserts the signal whenever
it starts an update cycle. The MCU uses this signal to start sending
data to the display.</p><p>The TE signal is connected to the external interrupt input of the
MCU. CubeMx generates and configures an interrupt on this pin.</p><p>The callback in the driver signal TouchGFX to start drawing:</p><div class="code-header"><div><h5>MB1642BDisplayDriver.c</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_GPIO_EXTI_Rising_Callback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> GPIO_Pin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">touchgfxSignalVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-flash">External flash<a class="hash-link" href="#external-flash" title="Direct link to heading">​</a></h3><p>The SPI NOR flash on the display shield is a standard SPI flash. The
driver is simpler than the display driver. No special initialization
is required to read data from the flash.</p><p>The driver can read data using polled SPI (busy waiting for all the
bytes) or use DMA. The time to start a DMA reception is similar to the
time it takes to read 20 bytes in polled mode, so it is often slower
for short reads. On the other hand, the DMA continues to run during
interrupts (e.g. sysTick or application interrupts) and can run in the
background when the MCU is busy rendering pixels. For this reason both
methods are used.</p><p>The flash driver is using another DMA channel than the display driver,
so both reception of new data and transmission of already drawn pixels
can run concurrently.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linker-script">Linker Script<a class="hash-link" href="#linker-script" title="Direct link to heading">​</a></h4><p>The linker controls where the various data in the application is
located. This is specified in the linker script. Here is the first
part of the linker script for the gcc compiler:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMORY</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  RAM        (xrw)    : ORIGIN = 0x20000000,   LENGTH = 36K</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  FLASH      (rx)     : ORIGIN = 0x8000000,    LENGTH = 128K</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPI_FLASH  (r)      : ORIGIN = 0x90000000,   LENGTH = 8M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It declares the NOR flash as starting from the address 0x90000000. The
flash driver in the target application reads data in the 0x90000000
addresses from the SPI flash (using the lower 24-bits as address in
the flash).</p><p>The External Flash Loader used in STM32CubeProgrammer can flash data
in this range to the SPI flash (see below).</p><p>This next section puts the image (ExtFlashSection) and font
(FontFlashSection) data in the SPI flash.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ExtFlashSection :</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *(ExtFlashSection ExtFlashSection.*)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *(.gnu.linkonce.r.*)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    . = ALIGN(0x4);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  } &gt;SPI_FLASH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  FontFlashSection :</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *(FontFlashSection FontFlashSection.*)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *(.gnu.linkonce.r.*)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    . = ALIGN(0x4);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  } &gt;SPI_FLASH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Other data can be put into the SPI flash by adding similar sections to the linker script.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flash-loader">Flash Loader<a class="hash-link" href="#flash-loader" title="Direct link to heading">​</a></h4><p>The G071 TouchGFX board setup contains a flash loader for
STM32CubeProgrammer. This flash loader can write data to the SPI NOR
flash.</p><p>The flash loader is found in the file <code>gcc/S25FL032P_STM32G071B-NUCLEO.stldr</code></p><p>A STM32CubeIDE project can be flashed directly from the CubeIDE, but an
IAR or Keil application must be flashed from STM32CubeProgrammer.</p><p>The flash loader is not available in STM32CubeProgrammer initially, so
it must be installed by copying the stldr file to the installation:</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/copying-stldr.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/copying-stldr.webp"></a><p>Copy flash loader to STM32CubeProgrammer installation</p></div><p>Now the flash loader can be selected in STM32CubeProgrammer as normal:</p><div class="figure"><a href="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/select-stldr.webp" target="_blank"><img src="/4.21/img/development/scenarios/touchgfx-on-lowcost-hardware/select-stldr.webp"></a><p>Copy flash loader to STM32CubeProgrammer installation</p></div><div class="highlight highlight-tip"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></div>Tip</h5></div><div class="highlight-content">The flash loader is only working with the specific GPIO configuration that is used on the Nucleo-G071RB board.<p>If a different GPIO configuration for the serial flash is used on
custom hardware, the flash loader must be modified similarly.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buttons">Buttons<a class="hash-link" href="#buttons" title="Direct link to heading">​</a></h3><p>The button driver is very simple. It samples the state of the 5 GPIOs
used for the joystick on MB1642B and the blue user button on the
Nucleo board.</p><p>This button driver is installed as BottonController in TouchGFX. This
means that the button presses are available directly in the TouchGFX
Designer to use in interactions. They can also be used in user code
like this:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Screen1View</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">handleKeyEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token char" style="color:rgb(130, 170, 255)">&#x27;6&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">application</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">gotoScreen2Screen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The key codes used are:</p><table><thead><tr><th><strong>Key</strong></th><th align="right"><strong>Code</strong></th></tr></thead><tbody><tr><td>Left</td><td align="right">&#x27;4&#x27;</td></tr><tr><td>Right</td><td align="right">&#x27;6&#x27;</td></tr><tr><td>Up</td><td align="right">&#x27;8&#x27;</td></tr><tr><td>Down</td><td align="right">&#x27;2&#x27;</td></tr><tr><td>Center</td><td align="right">&#x27;5&#x27;</td></tr><tr><td>Blue User Button</td><td align="right">&#x27;0&#x27;</td></tr></tbody></table><p>These keys are also usable when you run the Simulator (hit <code>F5</code> in
the TouchGFX Designer) by using the keyboard numpad.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/docs/category/scenarios-2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Scenarios</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/docs/development/scenarios/touchgfx-on-gpu2d"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TouchGFX on NeoChrom</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hardware-overview" class="table-of-contents__link toc-highlight">Hardware Overview</a><ul><li><a href="#gpio-allocation" class="table-of-contents__link toc-highlight">GPIO Allocation</a></li><li><a href="#starting-a-project" class="table-of-contents__link toc-highlight">Starting a Project</a></li></ul></li><li><a href="#display-updates" class="table-of-contents__link toc-highlight">Display Updates</a><ul><li><a href="#drawing-speed" class="table-of-contents__link toc-highlight">Drawing Speed</a></li></ul></li><li><a href="#touchgfx-limitations-with-serial-flash" class="table-of-contents__link toc-highlight">TouchGFX Limitations with Serial Flash</a><ul><li><a href="#texture-mapper" class="table-of-contents__link toc-highlight">Texture Mapper</a></li><li><a href="#bitmap-painter" class="table-of-contents__link toc-highlight">Bitmap Painter</a></li><li><a href="#l8-palette" class="table-of-contents__link toc-highlight">L8 Palette</a></li></ul></li><li><a href="#drivers" class="table-of-contents__link toc-highlight">Drivers</a><ul><li><a href="#display" class="table-of-contents__link toc-highlight">Display</a></li><li><a href="#external-flash" class="table-of-contents__link toc-highlight">External flash</a></li><li><a href="#buttons" class="table-of-contents__link toc-highlight">Buttons</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/assets/js/runtime~main.64e244a5.js"></script>
<script src="/4.21/assets/js/main.98cba5e9.js"></script>
</body>
</html>