<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/ui-development/touchgfx-engine-features/video">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/opensearch.xml">
<script src="/4.21/js/one-trust.js"></script>
<link rel="icon" href="/4.21/img/icons/icon-192x192.png">
<link rel="manifest" href="/4.21/manifest.json">
<meta name="theme-color" content="rgb(21, 142, 194)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/4.21/img/icons/icon-192x192.png">
<link rel="mask-icon" href="/4.21/img/icon.svg" color="rgb(21, 142, 194)">
<meta name="msapplication-TileImage" content="/4.21/img/icons/icon-192x192.png">
<meta name="msapplication-TileColor" content="#000">
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">MJPEG Video | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/docs/development/ui-development/touchgfx-engine-features/video"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MJPEG Video | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/docs/development/ui-development/touchgfx-engine-features/video"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/ui-development/touchgfx-engine-features/video" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/development/ui-development/touchgfx-engine-features/video" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/development/ui-development/touchgfx-engine-features/video" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/ui-development/touchgfx-engine-features/video" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/ui-development/touchgfx-engine-features/video" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/ui-development/touchgfx-engine-features/video" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/assets/css/styles.56327e77.css">
<link rel="preload" href="/4.21/assets/js/runtime~main.5f0184fc.js" as="script">
<link rel="preload" href="/4.21/assets/js/main.166012a4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="/4.21/docs/development/ui-development/touchgfx-engine-features/video" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/4.21/ko/docs/development/ui-development/touchgfx-engine-features/video" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/development/ui-development/touchgfx-engine-features/video" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/development/ui-development/touchgfx-engine-features/video" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/development/ui-development/touchgfx-engine-features/video" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/docs/development/ui-development/touchgfx-engine-features/video">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/docs/development/development-introduction">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/hardware-selection/hardware-selection-introduction">Hardware Selection</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware Selection&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/board-bring-up/board-introduction">Board Bring Up</a><button aria-label="Toggle the collapsible sidebar category &#x27;Board Bring Up&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX AL Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.21/docs/development/ui-development/ui-development-introduction">UI Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/software-architecture">Software Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Software Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/working-with-touchgfx">Working with TouchGFX</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with TouchGFX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/designer-user-guide">Designer User Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designer User Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.21/docs/category/touchgfx-engine-features">TouchGFX Engine Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX Engine Features&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/custom-triggers-and-actions">Custom Triggers and Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/position-size">Position and size</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/custom-containers">Custom Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/caching-bitmaps">Caching Bitmaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/custom-widgets">Custom Widgets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/canvas-widgets">Canvas Widgets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/dynamic-bitmaps">Dynamic Bitmaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/using-binary-fonts">Binary Fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/font-cache">Font Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/using-binary-translations">Binary Translations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/backend-communication">Backend Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/mixins">Mixins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/texts-and-fonts">Texts and Fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/languages-and-characters">Languages and Characters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/video">MJPEG Video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/development/ui-development/touchgfx-engine-features/svg">SVG</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/ui-components">UI Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Components&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/scenarios-1">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/category/scenarios-2">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->TouchGFX Documentation<!-- --> <b>4.21</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="https://support.touchgfx.com/docs/development/ui-development/touchgfx-engine-features/video" target="_blank" rel="noopener noreferrer">latest version</a></b>.</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/development/development-introduction"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/development/ui-development/ui-development-introduction"><span itemprop="name">UI Development</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/category/touchgfx-engine-features"><span itemprop="name">TouchGFX Engine Features</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MJPEG Video</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MJPEG Video</h1></header><p>TouchGFX supports using MJPEG video starting from version 4.18. Video
can be used to create more alive user interfaces or to show short
instructions or user guides.</p><p>Video is included in the user interface through the <a href="/4.21/docs/development/ui-development/ui-components/miscellaneous/video">Video Widget</a>. This
widget is available in the TouchGFX Designer and can be added to the
user interface as any other widget.</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/designer-1.webp" target="_blank"><img width="60%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/designer-1.webp"></a><p>Using the Video widget in TouchGFX Designer</p></div><p>Extra support software is required to decode the video on a STM32
microcontroller. This software is easily included in the project by
enabling video support in the <a href="/4.21/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/video-decoding">TouchGFX Generator</a>. With a TouchGFX
Board Setup where video is enabled (see list below) it is easy to run
the video on the target by pressing Run Target (<code class="shortcut">F6</code>) as normal.</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/stm32f746-1.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/stm32f746-1.webp"></a><p>Using the Video widget with STM32F746Discovery</p></div><p>If you don&#x27;t have video support in your target code, you will get
compile or linker errors.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mjpeg-video">MJPEG video<a class="hash-link" href="#mjpeg-video" title="Direct link to heading">​</a></h2><p>MJPEG videos consists of a large number of JPEG images (frames) packed
in a container file (.avi). The JPEG frames cannot be copied directly
to the framebuffer as they are compressed. The individual frames must
be decompressed into RGB format (16, 24 or 32 bit) before they
can be shown on the display.</p><p>This decompression is computationally expensive and lowers the
performance (i.e. frames per second) considerably compared to using
RGB bitmaps.</p><p>The advantage of the JPEG compression is the much reduced size of the
data.</p><p>The video used in the above screenshots is 240 x 135 pixel. This means
that each frame in 16-bit RGB format would take up 240 x 135 x 2 bytes
= 64.800 bytes. The video contains 178 frames (approximately seven
seconds). The total size of the video stored as bitmap would thus be
178 x 64.800 bytes = 11.534.400 bytes. The MJPEG AVI file is only
1.242.282 bytes or 10.7 % of the bitmaps.</p><p>This size reduction makes MJPEG video files very usefull for small
sequences of video.</p><p>The reduced size comes with some compression artifacts (errors). These
are often acceptable for real-world footage but can be unacceptable
for high contrast graphics.</p><p>Some STM32 microcontrollers supports hardware accelerated decoding of
JPEG images (e.g. STM32F769 or STM32H750). This speeds up the decoding
of JPEG and increases the possible framerate of the video.</p><p>The decoding of a JPEG frame can easily take more than 16ms (depends
on the MCU speed and the video resolution). This means that the
decoding rate of a MJPEG video in most cases is lower than the normal
frame rate of the user interface. For some applications it is
acceptable to lower the overall frame rate to the decoding rate. For
others it is required to keep the 60 fps frame rate of the user
interface even if the video runs at e.g. 20 fps. An example is an
application with an animated progress circle next to a video. The
circle looks best if it is animated with 60 fps, even if the video
only shows a new frame at 20 fps.</p><p>The above example on STM32F746 uses 18-20 ms for decoding the
individual JPEG frames.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-video-with-touchgfx">Using Video with TouchGFX<a class="hash-link" href="#using-video-with-touchgfx" title="Direct link to heading">​</a></h2><p>TouchGFX makes it easy to include a video as part of your user
interface. You need three things: A Video widget, a VideoController,
and of course your MJPEG video file.</p><p>The Video widget is used in your user interface as all other
widgets. The video controller is part of the low level software that makes up a
full TouchGFX environment (HAL, Operating System, drivers, etc.)</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/video-sw-architecture.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/video-sw-architecture.webp"></a><p>Video widget and Video Controller</p></div><p>The VideoController consists of software that controls the decoding of
the MJPEG file and buffer management.</p><p>The TouchGFX Designer automatically includes a video controller into
all simulator projects. This makes it very easy to use video in
simulator prototypes: Just add a Video widget, select a video file, and
press &quot;Run Simulator&quot; (<code class="shortcut">F5</code>).</p><p>To use video on hardware you also need a video controller in the
target project (IAR, Keil, arm-gcc, CubeIDE). This is already added to
some of the TouchGFX Board Specification packages (see list below),
but you can add video support any project with the
TouchGFX Generator. See the <a href="/4.21/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/video-decoding">Generator User Guide</a>.</p><p>When you have a video enabled platform it is easy to add and configure
the Video widget in the Designer. The use of Video widget in the Designer is detailed <a href="/4.21/docs/development/ui-development/ui-components/miscellaneous/video">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="video-files-in-a-touchgfx-project">Video files in a TouchGFX project<a class="hash-link" href="#video-files-in-a-touchgfx-project" title="Direct link to heading">​</a></h3><p>When you include a video file in TouchGFX Designer it copies the .avi
file to the <code>assets/vidoes</code> folder. During code generation the video
is copied to <code>generated/videos/bin</code> as a .bin file and to
<code>generated/videos/obj</code> as a .o file. The .o and .bin contains the same
data, but the .o file is ELF format (which is preferred by some
compilers and IDE&#x27;s).</p><p>The project updaters that are executed when generating code includes
the video files in the target project. This means that the video files
are linked into the executable and are available in the application.</p><p>The application programmer can add other videos to the <code>assets/videos</code>
folder. These will also be included in the project.</p><p>The file <code>generated/videos/include/videos/VideoDatabase.hpp</code> contains
symbolic information about the videos compiled into application:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const uint32_t video_SampleVideo1_240x135_bin_length = 1242282;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef SIMULATOR</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extern const uint8_t* video_SampleVideo1_240x135_bin_start;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extern const uint8_t video_SampleVideo1_240x135_bin_start[];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These declarations can be used to assign the video to a Video widget in
user code.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-video-files-from-user-code">Using video files from user code<a class="hash-link" href="#using-video-files-from-user-code" title="Direct link to heading">​</a></h3><p>In some projects it is not sufficient to select a video from within
the TouchGFX Designer. E.g. you want to select different videos at
startup. First you must add the video file to <code>assets/videos</code>:</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/myvideo-in-assets.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/myvideo-in-assets.webp"></a><p>Adding a video to assets/videos</p></div><p>The video files in the <code>assets/videos</code> folder will be included in the
<code>VideoDatabase.hpp</code> when you generate code (or run make assets):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const uint32_t video_myVideo_bin_length = 1242282;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef SIMULATOR</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extern const uint8_t* video_myVideo_bin_start;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extern const uint8_t video_myVideo_bin_start[];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can now use these declarations in user code to get the Video widget
to play our movie:</p><div class="code-header"><div><h5>Screen1View.cpp</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;gui/screen1_screen/Screen1View.hpp&gt;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;videos/VideoDatabase.hpp&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">Screen1View</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">Screen1View</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Screen1View</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">setupScreen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Screen1ViewBase</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">setupScreen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">    video</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setVideoData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">video_myVideo_bin_start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> video_myVideo_bin_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">    video</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setWidthHeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">240</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">136</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">    video</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">play</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the video data is now linked into the application. It is
possible to avoid this by not putting any videoes in <code>assets/videos</code>
and manually flash the video to a dedicated area in the external
flash. Then just pass the address and length using the flash address:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Screen1View</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">setupScreen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   video</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setVideoData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token number" style="color:rgb(247, 140, 108)">0xA0200000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1242282</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a class="hash-link" href="#limitations" title="Direct link to heading">​</a></h3><p>TouchGFX does not support video decoding in portrait mode.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-of-video-enabled-development-kits">List of video enabled development kits<a class="hash-link" href="#list-of-video-enabled-development-kits" title="Direct link to heading">​</a></h2><p>These development kits have video enabled by default in TouchGFX Board
Setup package available in the TouchGFX Designer:</p><ul><li>STM32F769Discovery (hardware accelerated decoding)</li><li>STM32H750BDiscovery (hardware accelerated decoding)</li><li>STM32F746Discovery (software based decoding)</li></ul><p>If you are using another development kit or custom hardware, remember
to enable video support in the TouchGFX Generator.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-mjpeg-avi-files">Creating MJPEG AVI files<a class="hash-link" href="#creating-mjpeg-avi-files" title="Direct link to heading">​</a></h2><p>Most videos are not stored in MJPEG AVI files as this is not a common
video format anymore. It is therefore often necessary to convert a
video file to MJPEG format before using it in a TouchGFX project.</p><p>Conversion can easily be done with for example
<a href="https://en.wikipedia.org/wiki/FFmpeg" target="_blank" rel="noopener noreferrer">FFMPEG</a>. Other
applications and online services are also available.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-ffmpeg">Using FFMPEG<a class="hash-link" href="#using-ffmpeg" title="Direct link to heading">​</a></h3><p>Windows binaries for FFMPEG can
be found <a href="https://www.gyan.dev/ffmpeg/builds/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>To convert the video file input.mov to MJPEG use this command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i input.mov -s 480x272 -vcodec mjpeg -qscale 1 -an output.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The MJPEG video is in the output.avi file. This file can be copied to
the <code>assets/videos</code>.</p><p>To keep the correct aspect ratio of the video you can specify the
width in pixels (here 480) and the height as &#x27;-1&#x27; (minus 1):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i input.mov -vf scale=480:-1 -vcodec mjpeg -qscale 1 -an output.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is possible to cut out a section of a video using -ss to specify
start time and -t or -to to specify duration or stop time:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -ss 3 -i input.mov -t 3 -s 480x272 -vcodec mjpeg -qscale 1 -an output_section.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -ss 3 -i input.mov -to 5 -s 480x272 -vcodec mjpeg -qscale 1 -an output_section.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>-s</td><td>Output video resolution</td></tr><tr><td>-qscale</td><td>quality scale from 1..31 (from good to bad)</td></tr><tr><td>-an</td><td>Strip audio</td></tr><tr><td>-vf</td><td>Set filter graph</td></tr><tr><td>-ss</td><td>Start time in seconds</td></tr><tr><td>-t</td><td>Duration in seconds</td></tr><tr><td>-to</td><td>Stop time in seconds</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="decoding-strategies">Decoding Strategies<a class="hash-link" href="#decoding-strategies" title="Direct link to heading">​</a></h2><p>As mentioned above, TouchGFX needs to convert the individual MJPEG
frames from JPEG to RGB before showing them on the framebuffer. This
decoding can be done either on-the-fly when needed or asynchronous by
decoding the next frame to a video buffer in advance.</p><p>The asynchronous decoding is done by second task, not the UI
task. This means that the decoding in some cases can run in
parallel with the UI task&#x27;s drawing.</p><p>TouchGFX has 3 strategies, each with advantages and disadvantages:</p><table><thead><tr><th>Strategy</th><th>Description</th></tr></thead><tbody><tr><td>Direct To Frame Buffer</td><td>Decode the current video frame directly to the framebuffer when needed</td></tr><tr><td>Dedicated Buffer</td><td>Decode the next video frame to a video buffer. Copy from the video buffer to the frame buffer</td></tr><tr><td>Double Buffer</td><td>Decode the next video frame to a second video buffer. Swap video buffers when decoding is done</td></tr></tbody></table><p>The Designer always select the Direct To Frame Buffer strategy for
simulator projects. The strategy used on target is configurable in the
<a href="/4.21/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/video-decoding#video-decoding-strategy">Generator</a>.</p><p>The strategies are explained in detail below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="direct-to-frame-buffer">Direct To Frame Buffer<a class="hash-link" href="#direct-to-frame-buffer" title="Direct link to heading">​</a></h3><p>The Direct To Frame Buffer strategy decodes a JPEG frame during the
rendering phase on the TouchGFX engine (see
<a href="/4.21/docs/basic-concepts/rendering#render">Rendering</a>)</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/direct-decode.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/direct-decode.webp"></a><p>Decoding directly to the frame buffer</p></div><p>During the Update phase (see
<a href="/4.21/docs/basic-concepts/rendering#update">Update</a>) the Video widget
decides if the movie should be advanced to the next frame. During the
following Rendering phase, the JPEG frame is decoded line-by-line to a
&quot;line buffer&quot;. The pixels are then converted to match the frame buffer
format and copied to the framebuffer.</p><p>If the Video widget is covered by other widgets it is redrawn in
multiple block (the visible parts are split into rectangles). Drawing
each of these blocks requires repeated decompression work. This makes
this strategy unsuitable for user interface where other UI elements
like Buttons are put on top of the video as the decoding time is
increased.</p><p>The advantage of this solution is that only a little extra memory is
used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dedicated-buffer">Dedicated Buffer<a class="hash-link" href="#dedicated-buffer" title="Direct link to heading">​</a></h3><p>The Dedicated or single buffer decoding strategy decodes a JPEG frame
to a dedicated RGB buffer first, and then later copies from that
buffer to the frame buffer.</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/single-buf-decode.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/single-buf-decode.webp"></a><p>Decoding to a separate buffer</p></div><p>Opposed to the direct strategy the decoding now runs in a separate
task, not the normal TouchGFX task. The Video widget calculates if a
new movie frame should be shown in the next user interface tick and
signals the decoding task to start decoding the next frame. During
this decoding the video buffer cannot be drawn to the frame buffer (it
is partly updated). The user interface is blocked from redrawing the
video widget while the decoding is running. When the drawing is done,
it will continue. If the user interface does not need to redraw the
video, the user interface can continue as normal.</p><p>When the new video is fully decoded, the cost of rendering the video
to the framebuffer is the same as drawing a bitmap (low). With this
strategy it is therefore not a problem to put buttons or text on top
of the video.</p><p>The disadvantage of this strategy the memory used by the task and the
video buffer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="double-buffer">Double Buffer<a class="hash-link" href="#double-buffer" title="Direct link to heading">​</a></h3><p>The double buffered decoding strategy has two RGB buffers. The
decoding is done into either of these buffers, whereas the rendering
to the frame buffer happens from the other RGB buffer.</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/double-buf-decode.webp" target="_blank"><img width="50%" src="/4.21/img/development/ui-development/touchgfx-engine-features/video/double-buf-decode.webp"></a><p>Decoding to two video buffers</p></div><p>When a frame is decoded, the decoding task waits for the UI to show
that video buffer and release the previous buffer. The decoding of the
next frame can start as soon as the user interface has changed
buffer.</p><p>An obvious disadvantage for this strategy is the memory usage which is
doubled from the previous strategy.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="video-frame-rate-and-user-interface-frame-rate">Video frame rate and user interface frame rate<a class="hash-link" href="#video-frame-rate-and-user-interface-frame-rate" title="Direct link to heading">​</a></h3><p>The decoding strategies has different effects on the user interface
frame rate. The user interface frame rate is the number of (different)
frames produced in the framebuffer per second.</p><p>With the direct to framebuffer strategy, the decoding speed of the
video easily affects the effective frame rate of the user
interface. Assume as an example that the decoding of one JPEG frame
takes 28 ms, and that we want to show 20 video frames each second (20
fps). This is realistic as the total decoding time is: 28 ms x 20/s =
560 ms/s.  The 20 fps corresponds to a new video frame in every third
frame (of 60 fps). So in every third UI frame we want a new video
frame, but as the decoding time is part of the rendering phase, the
rendering of that frame takes 28 ms plus the rendering of the rest of
the user interface, say 2 ms. The total rendering of the frame is 30
ms and we lost one tick, but are ready to produce a new frame for the
next tick. In this next frame we are not decoding video, so here the
rendering is below 16 ms and meets the limit. We can then start
decoding the second video frame in the fourth tick.</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/direct-video-20fps.webp" target="_blank"><img src="/4.21/img/development/ui-development/touchgfx-engine-features/video/direct-video-20fps.webp"></a><p>20 fps video</p></div><p>The video frame rate is therefore 20 fps, and the user interface frame
rate is 40 (out of 60 possible).</p><p>The result is that we cannot animate other elements of the UI with 60
fps because the video decoding limits the frame rate.</p><p>With the double buffer decoding strategy this is improved. The user
interface always has a video buffer available with the latest
frame. The decoder task can swap this buffer with the other buffer
(containing the next frame) when it is available and the rendering
thread is not actively drawing. After the swap the decoding task can
immediately start decoding the next frame:</p><div class="figure"><a href="/4.21/img/development/ui-development/touchgfx-engine-features/video/double-video-20fps.webp" target="_blank"><img src="/4.21/img/development/ui-development/touchgfx-engine-features/video/double-video-20fps.webp"></a><p>20 fps video</p></div><p>In UI frame 1 and 2 the UI is showing the first decoded video
frame. Meanwhile the decoder is producing frame 2. In UI frame 3 this
frame is ready and will be used. The decoder is free to start decoding
the next frame (not shown in the figure).</p><p>It is thus possible to have user interface with other elements updated
in every frame, even if the video decoding is only able to produce a
new frame every 2 ticks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-articles">Related articles<a class="hash-link" href="#related-articles" title="Direct link to heading">​</a></h2><p>As mentioned above the video support for target project is configured in the TouchGFX Generator.
See the <a href="/4.21/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/video-decoding">Generator User Guide</a>. for instructions.</p><p>The Video widget is available in the Designer. The use of Video widget
in the Designer is detailed
<a href="/4.21/docs/development/ui-development/ui-components/miscellaneous/video">here</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/docs/development/ui-development/touchgfx-engine-features/languages-and-characters"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Languages and Characters</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/docs/development/ui-development/touchgfx-engine-features/svg"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SVG</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mjpeg-video" class="table-of-contents__link toc-highlight">MJPEG video</a></li><li><a href="#using-video-with-touchgfx" class="table-of-contents__link toc-highlight">Using Video with TouchGFX</a><ul><li><a href="#video-files-in-a-touchgfx-project" class="table-of-contents__link toc-highlight">Video files in a TouchGFX project</a></li><li><a href="#using-video-files-from-user-code" class="table-of-contents__link toc-highlight">Using video files from user code</a></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li></ul></li><li><a href="#list-of-video-enabled-development-kits" class="table-of-contents__link toc-highlight">List of video enabled development kits</a></li><li><a href="#creating-mjpeg-avi-files" class="table-of-contents__link toc-highlight">Creating MJPEG AVI files</a><ul><li><a href="#using-ffmpeg" class="table-of-contents__link toc-highlight">Using FFMPEG</a></li></ul></li><li><a href="#decoding-strategies" class="table-of-contents__link toc-highlight">Decoding Strategies</a><ul><li><a href="#direct-to-frame-buffer" class="table-of-contents__link toc-highlight">Direct To Frame Buffer</a></li><li><a href="#dedicated-buffer" class="table-of-contents__link toc-highlight">Dedicated Buffer</a></li><li><a href="#double-buffer" class="table-of-contents__link toc-highlight">Double Buffer</a></li><li><a href="#video-frame-rate-and-user-interface-frame-rate" class="table-of-contents__link toc-highlight">Video frame rate and user interface frame rate</a></li></ul></li><li><a href="#related-articles" class="table-of-contents__link toc-highlight">Related articles</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2023 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/assets/js/runtime~main.5f0184fc.js"></script>
<script src="/4.21/assets/js/main.166012a4.js"></script>
</body>
</html>