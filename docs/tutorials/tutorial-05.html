<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/tutorial-05">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/opensearch.xml">
<script src="/4.21/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">Tutorial 5: Creating Custom Triggers and Actions | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/docs/tutorials/tutorial-05"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tutorial 5: Creating Custom Triggers and Actions | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/docs/tutorials/tutorial-05"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/tutorials/tutorial-05" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/tutorials/tutorial-05" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/tutorials/tutorial-05" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/tutorials/tutorial-05" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/tutorials/tutorial-05" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/tutorials/tutorial-05" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/assets/css/styles.2fc40eaa.css">
<link rel="preload" href="/4.21/assets/js/runtime~main.8450b776.js" as="script">
<link rel="preload" href="/4.21/assets/js/main.86be4dea.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="/4.21/docs/tutorials/tutorial-05" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/4.21/ko/docs/tutorials/tutorial-05" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/tutorials/tutorial-05" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/tutorials/tutorial-05" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/tutorials/tutorial-05" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/docs/tutorials/tutorial-05">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/development/development-introduction">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/tutorials/tutorial-01">Tutorial 1: Trying Out the Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/tutorials/tutorial-02">Tutorial 2: Creating Your Own Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/tutorials/tutorial-03">Tutorial 3: Applications with Multiple Screens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/docs/tutorials/tutorial-04">Tutorial 4: Creating a Scroll Wheel with Custom Behavior</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/docs/tutorials/tutorial-05">Tutorial 5: Creating Custom Triggers and Actions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/docs/tutorials/tutorial-06/tutorial-06-introduction">Tutorial 6: Using TextAreas</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial 6: Using TextAreas&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/docs/category/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tutorial 5: Creating Custom Triggers and Actions</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial 5: Creating Custom Triggers and Actions</h1></header><p>With TouchGFX Designer it is possible to define your own interaction components with custom triggers and actions. Each Screen in your application can contain a collection of actions <em>(these are simply void methods in C++)</em> that you can call from within TouchGFX Designer as well as in code, while custom containers can also have a collection of triggers <em>(which is equal to a callback in C++)</em> which your application can react to.</p><p>In this tutorial, we will go through this functionality to learn the possibilities this gives us to create more clean and dynamic TouchGFX applications.</p><p>This tutorial is not suitable for new users of TouchGFX. It is recommended to revisit the tutorial later.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-custom-action-to-a-screen">Adding a Custom Action to a Screen<a class="hash-link" href="#adding-a-custom-action-to-a-screen" title="Direct link to heading">​</a></h2><p>In this section we will:</p><ul><li>Create a new application with a background box and a button</li><li>Add a custom action to the application</li><li>Change the background color using the custom action when the button is pressed</li></ul><p>Let&#x27;s start out by creating a new blank application with dimensions 480x272 (for example for STM32F746 or the simulator) and inserting a Box for the background (let&#x27;s name this &quot;background&quot;) and a Button (name this one &quot;button&quot;). You should have something similar to the image below:</p><div style="position:relative"><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/white-background-and-button-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/white-background-and-button-4-17.webp"></a><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(420, 85)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">1</text></g></svg><p>Adding a white background Box and a Button</p></div></div><p>Next, let&#x27;s add a custom action to our Screen. You can do this from the properties tab of the Screen by selecting the Screen and pressing the + button in the &quot;Actions&quot; group (1 above). Name the action &quot;setBackgroundColor&quot; and give it a description like &quot;Sets the background color&quot;. Do not set a type for this Action.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/adding-custom-action-to-screen-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/adding-custom-action-to-screen-4-17.webp"></a><p>Adding a new custom action to a Screen</p></div><p>Press <code class="shortcut">F4</code> to generate the code for the project. This generates a virtual method in <code>TouchGFX/generated/gui_generated/include/gui_generated/screen1_screen/Screen1ViewBase.hpp</code> called <code>setBackgroundColor()</code> with an empty implementation in <code>Screen1ViewBase.cpp</code>.</p><p>You can add functionality to this method by overriding it in user code in the <code>Screen1View.cpp</code> file or by creating interactions through TouchGFX Designer.
Let&#x27;s try out the latter by going to the interactions tab for the screen and adding an interaction that calls our new method when our button is clicked.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/calling-setbackgroundcolor-on-click-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/calling-setbackgroundcolor-on-click-4-17.webp"></a><p>Call setBackgroundColor when button is clicked</p></div><p>Now we must specify what actually happens when <code>setBackgroundColor</code> is called. This is done by using our new custom action (1) as a trigger in another interaction. Let&#x27;s start out by simply setting the background Box color to black by using the action <em>&quot;Change box color&quot;</em> (2) when the trigger <em>&quot;setBackgroundColor is called&quot;</em> happens.</p><div style="position:relative"><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/implementing-setbackgroundcolor-functionality-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/implementing-setbackgroundcolor-functionality-4-17.webp"></a><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(355, 60)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">1</text></g></svg><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(410, 76)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">2</text></g></svg><p>Implementing functionality for custom action setBackgroundColor</p></div></div><p>Now run the simulator and press the button; the background should turn black. You have successfully created your first custom action.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/black-color-result-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/black-color-result-4-17.webp"></a><p>Pressing button turns background black</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="passing-a-value-to-a-custom-action">Passing a Value to a Custom Action<a class="hash-link" href="#passing-a-value-to-a-custom-action" title="Direct link to heading">​</a></h2><p>Building upon the application we have just created, this section will expand upon the custom action concept by:</p><ul><li>Adding a parameter to the setBackgroundColor custom action</li><li>Passing a random color to setBackgroundColor</li><li>Using this to change the background to random colors when pressing the button</li></ul><p>Let&#x27;s make this application a little more interesting by passing a value to our <code>setBackgroundColor</code> custom action to make it more dynamic.</p><p>Goto the interactions tab for the Screen and delete the two current interactions by pressing the x button for each of them, as we will be setting up new ones.</p><p>Go to the properties tab for the Screen to the custom action called <code>setBackgroundColor</code> and check off the checkbox for type and input &quot;colortype&quot; which will be the type of the parameter we are going to pass to the action (colortype is the built-in TouchGFX type for describing colors). It is not possible to name the parameter, it will be named <em>&quot;value&quot;</em>.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/adding-type-to-action-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/adding-type-to-action-4-17.webp"></a><p>Setting up a parameter for a custom action</p></div><p>Next let&#x27;s setup an interaction which uses our newly added parameter value. We do this by using the trigger &quot;setBackgroundColor is called&quot; and the action &quot;Execute C++ code&quot;. We want to use our new parameter to set the color of our background Box, so the code to execute should be:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">background</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">background</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">invalidate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The second line forces a redraw of the background with the new color.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/set-color-execute-code-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/set-color-execute-code-4-17.webp"></a><p>Using the passed value to change color of background</p></div><p>Notice that the trigger displays the name and type of the parameter &quot;value : colortype&quot;.</p><p>Next, let&#x27;s set up the interaction that actually calls setBackgroundColor when our button is clicked. Add another interaction with trigger &quot;Button is clicked&quot; and action &quot;Call Screen1 setBackgroundColor&quot; and notice that the value property also displays which type it expects. Let&#x27;s pass a random color to setBackgroundColor by utilizing the randomization method <code>rand()</code> in <code>stdlib.h</code> to get three random numbers between 0 and 255 and using those to specify the color. To gain access to <code>rand()</code> we need to include it into our application. It is also possible to supply your own includes from within TouchGFX Designer for both screens and custom containers, which we need to do for this example. Go to the properties tab for the screen and under the &quot;INCLUDES&quot; group, input:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;stdlib.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/include-stdlib-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/include-stdlib-4-17.webp"></a><p>Including stdlib to gain access to rand()</p></div><p>Next, for the value property we are going to input (1):</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="position:relative"><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/pass-random-color-to-action-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/pass-random-color-to-action-4-17.webp"></a><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(355, 110)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">1</text></g></svg><p>Passing a random color value when button is clicked</p></div></div><p>Now run the simulator and try pressing the button a couple of times. You should see the background changing to random colors.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/random-color-result-initial-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/random-color-result-initial-4-17.webp"></a><p>Resulting random color when clicking the button</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-custom-triggers-in-custom-containers">Using Custom Triggers in Custom Containers<a class="hash-link" href="#using-custom-triggers-in-custom-containers" title="Direct link to heading">​</a></h2><p>Finally, Custom Containers can also define a collection of custom triggers so in this section we will expand upon the application by doing the following:</p><ul><li>Create a new custom container called ColorEmitter</li><li>Add a custom trigger to ColorEmitter called &quot;colorChanged&quot;</li><li>Use the colorChanged trigger to signal out random colors to the application when the button is pressed</li><li>Set up interactions in the screen to listen for the colorChanged trigger</li><li>Use whatever color the ColorEmitter sends out to set the color of the background box</li></ul><p>Let&#x27;s try using a custom trigger to signal some event in our application. Instead of our button interaction passing the random color to <code>setBackgroundColor</code>, let&#x27;s try and make a custom container send out the random color to our Screen, and then let the Screen use whatever value the custom container communicated. This should end up being a simple example of different UI components communicating with each other in an application to make smaller, more reusable components.</p><p>First, let&#x27;s create a new custom container and call it &quot;ColorEmitter&quot;. Insert a button and call it &quot;button&quot;. You should have something similar to the image below:</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/color-emitter-custom-container-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/color-emitter-custom-container-4-17.webp"></a><p>ColorEmitter custom container</p></div><p>Now, let&#x27;s make it so that whenever the button is clicked, the ColorEmitter will emit a random color to the world. Anyone can then decide to listen for this emit and use the color for something. In our case, we just want to mimic the behavior we had before by using the color to set the background color.</p><p>To make the custom container emit a color, first we need to create a custom trigger. Go to the properties tab for the custom container and press the + button in the &quot;Triggers&quot; group (1). Name the trigger &quot;colorChanged&quot;, give it description &quot;The color has changed&quot; and give it the type &quot;colortype&quot;.</p><div style="position:relative"><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/adding-custom-trigger-to-custom-container-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/adding-custom-trigger-to-custom-container-4-17.webp"></a><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(420, 78)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">1</text></g></svg><p>Adding a custom trigger to a custom container</p></div></div><p>Next, go to the interactions tab for the custom container and create a new interaction. Use trigger &quot;Button is clicked&quot; and action &quot;Emit colorChanged&quot;. Now we want to communicate a random color, so use the same code from earlier for the value property:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rand</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/emitting-color-changed-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/emitting-color-changed-4-17.webp"></a><p>Emitting a custom trigger</p></div><p>However, this won&#x27;t work initially since the <code>touchgfx::Color</code> namespace is not automatically included within our custom container. So like earlier, we are going to supply our own include for the custom container. Go to the properties tab for the custom container and under the &quot;Includes&quot; group (1), input:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;touchgfx/Color.hpp&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="position:relative"><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/extra-includes-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/extra-includes-4-17.webp"></a><svg style="position:absolute;top:0;left:0;pointer-events:none" viewBox="0 0 500 500"><g transform="translate(420, 115)"><path id="p1" d="M12 2c3.196 0 6 2.618 6 5.602 0 2.238-1.058 3.488-2.659 5.381-1.078 1.274-2.303 2.722-3.341 4.697-1.038-1.976-2.263-3.423-3.341-4.697-1.601-1.893-2.659-3.143-2.659-5.381 0-2.984 2.804-5.602 6-5.602z" fill="white" stroke="black"></path><text x="11.7" y="9.5" font-size="x-small" dominant-baseline="middle" text-anchor="middle">1</text></g></svg><p>Supplying extra includes</p></div></div><p>Now we want to replace our old button with the new ColorEmitter custom container we have created. Select Screen1 and delete the button here. This should give a domain error in the interaction that was using this button, so delete that interaction also as we will create a new one for the ColorEmitter. Now insert an instance of our ColorEmitter on Screen1, then create a new interaction on Screen1. For the trigger, you should see an option called &quot;ColorEmitter colorChanged happens&quot;. Select that one and for the action use &quot;Call Screen1 setBackgroundColor&quot;. Now we need to use the value from the colorChanged emit, which will always be named &quot;value&quot; (like discussed earlier in this article). Therefore, input &quot;value&quot; into the value property.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/emit-colorchanged-happens-interaction-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/emit-colorchanged-happens-interaction-4-17.webp"></a><p>Setting up an interaction to listen for colorChanged custom trigger</p></div><p>Now run simulator and try pressing the button again. The same behavior should be present, with the background changing to random colors. But now, instead of just having all the functionality implemented in the Screen, we&#x27;ve successfully created our own communication between the Screen and some of its smaller, reusable components, namely our simple ColorEmitter.</p><div class="figure"><a href="/4.21/img/tutorials/tutorial-05/random-color-result-final-4-17.webp" target="_blank"><img src="/4.21/img/tutorials/tutorial-05/random-color-result-final-4-17.webp"></a><p>Resulting random color when button is clicked</p></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/docs/tutorials/tutorial-04"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tutorial 4: Creating a Scroll Wheel with Custom Behavior</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/docs/tutorials/tutorial-06/tutorial-06-introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutorial 6: Using TextAreas</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#adding-a-custom-action-to-a-screen" class="table-of-contents__link toc-highlight">Adding a Custom Action to a Screen</a></li><li><a href="#passing-a-value-to-a-custom-action" class="table-of-contents__link toc-highlight">Passing a Value to a Custom Action</a></li><li><a href="#using-custom-triggers-in-custom-containers" class="table-of-contents__link toc-highlight">Using Custom Triggers in Custom Containers</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/assets/js/runtime~main.8450b776.js"></script>
<script src="/4.21/assets/js/main.86be4dea.js"></script>
</body>
</html>