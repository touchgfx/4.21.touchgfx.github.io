"use strict";(self.webpackChunktouchgfx_documentation=self.webpackChunktouchgfx_documentation||[]).push([[1267],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),h=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=h(e.components);return i.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=h(n),g=r,d=p["".concat(s,".").concat(g)]||p[g]||c[g]||a;return n?i.createElement(d,o(o({ref:t},u),{},{components:n})):i.createElement(d,o({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var h=2;h<a;h++)o[h]=n[h];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},44035:function(e,t,n){var i=n(67294),r=n(25026);t.Z=function(e){const t=e.noShadow||!1,n=e.width,a=e.height,o=(0,r.Z)(e.imageSource);return t?i.createElement("div",{className:"figure noshadow"},i.createElement("a",{href:o,target:"_blank"},i.createElement("img",{width:n,height:a,src:o})),i.createElement("p",null,e.children)):i.createElement("div",{className:"figure"},i.createElement("a",{href:o,target:"_blank"},i.createElement("img",{width:n,height:a,src:o})),i.createElement("p",null,e.children))}},88678:function(e,t,n){var i=n(67294);class r extends i.Component{render(){const e=`highlight highlight-${this.props.type}`;return i.createElement("div",{className:e},i.createElement("div",{className:"highlight-heading"},i.createElement("h5",null,i.createElement("div",{className:"highlight-icon"},this.props.icon),this.props.header)),i.createElement("div",{className:"highlight-content"},this.props.children))}}t.Z=r},93054:function(e,t,n){var i=n(67294),r=n(88678);const a=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},i.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}));class o extends i.Component{render(){return i.createElement(r.Z,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:a},this.props.children)}}t.Z=o},58801:function(e,t,n){n.r(t),n.d(t,{assets:function(){return v},contentTitle:function(){return m},default:function(){return y},frontMatter:function(){return d},metadata:function(){return f},toc:function(){return w}});var i=n(3905),r=n(44035),a=n(93054),o=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(h)for(var n of h(t))c.call(t,n)&&p(e,n,t[n]);return e};const d={id:"svg",title:"SVG"},m=void 0,f={unversionedId:"development/ui-development/touchgfx-engine-features/svg",id:"development/ui-development/touchgfx-engine-features/svg",title:"SVG",description:"",source:"@site/docs/development/ui-development/touchgfx-engine-features/svg.mdx",sourceDirName:"development/ui-development/touchgfx-engine-features",slug:"/development/ui-development/touchgfx-engine-features/svg",permalink:"/4.21/zh-CN/docs/development/ui-development/touchgfx-engine-features/svg",draft:!1,tags:[],version:"current",frontMatter:{id:"svg",title:"SVG"},sidebar:"docs",previous:{title:"MJPEG Video",permalink:"/4.21/zh-CN/docs/development/ui-development/touchgfx-engine-features/video"},next:{title:"UI Components",permalink:"/4.21/zh-CN/docs/category/ui-components"}},v={},w=[{value:"What is SVG",id:"what-is-svg",level:2},{value:"Using SVGs with TouchGFX",id:"using-svgs-with-touchgfx",level:2},{value:"Target configuration",id:"target-configuration",level:3},{value:"Running on target",id:"running-on-target",level:3},{value:"Supported SVG elements",id:"supported-elements",level:2},{value:"Unsupported SVG elements",id:"unsupported-elements",level:2},{value:"Related articles",id:"related-articles",level:2}],k={toc:w};function y(e){var t,n=e,{components:o}=n,p=((e,t)=>{var n={};for(var i in e)u.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&h)for(var i of h(e))t.indexOf(i)<0&&c.call(e,i)&&(n[i]=e[i]);return n})(n,["components"]);return(0,i.kt)("wrapper",(t=g(g({},k),p),l(t,s({components:o,mdxType:"MDXLayout"}))),(0,i.kt)("p",null,"TouchGFX supports using SVG images starting from version 4.21. SVG\nimages can be used to create user interfaces with vector graphics in\ncombination with the traditional bitmap based graphics."),(0,i.kt)("p",null,"SVG images are included in the user interface through the ",(0,i.kt)("a",g({parentName:"p"},{href:"../ui-components/miscellaneous/svg"}),"SVGImage\nWidget"),". This widget is available\nin the TouchGFX Designer and can be added to the user interface as any\nother widget."),(0,i.kt)("p",null,"SVG images are only supported on 16bpp or 24bpp framebuffers."),(0,i.kt)("h2",g({},{id:"what-is-svg"}),"What is SVG"),(0,i.kt)("p",null,"Scalable Vector Graphics, SVG, is an XML-based file format for\ndefining 2D images through the use of a small set of graphics\nprimitives. Some of the primitives are rectangles, circles, and\ncurves. The primitives can be filled with a color or gradient. The\noutline (stroke) can also be drawn with a specific width."),(0,i.kt)("p",null,"The first big feature of SVG graphics is that it scalable. This means\nthat the drawing specified is not only usable in a single resolution\nbut can be scaled up or down without loosing quality. This is a big\nadvantage compared to Bitmaps where artifacts are introduced when you\nscale up and details are lost when you scale down."),(0,i.kt)("p",null,"The second important feature of SVG graphics is that it is vector\nbased. This means that an image is made up of a set of geometric\nfigures like lines and circles that combines to make the drawing. This\nis in contrast to a bitmap image that basically defines a color value\nto all pixels in the image. The advantage of the vector definition is\nthat the image in most cases are very small compared to bitmaps and\nthat it is much more flexible. An image showing e.g. a few yellow\nellipses can easily be changed in to am image consisting of green\nellipses."),(0,i.kt)("p",null,"TouchGFX supports a subset of ",(0,i.kt)("a",g({parentName:"p"},{href:"https://www.w3.org/TR/SVGTiny12/index.html"}),"SVG Tiny\n1.2"),". It is not possible\nto support the whole specification within the restrictions imposed by\nthe hardware, the runtime environment, and the performance\ncharacteristics of TouchGFX."),(0,i.kt)("p",null,"SVG images can be created with many imaging tools, e.g. , or they can\nbe written by hand. If you want to learn how to write your own SVG we\nrecommend the introduction\n",(0,i.kt)("a",g({parentName:"p"},{href:"https://www.w3schools.com/graphics/svg_intro.asp"}),"here"),"."),(0,i.kt)("h2",g({},{id:"using-svgs-with-touchgfx"}),"Using SVGs with TouchGFX"),(0,i.kt)("p",null,"SVG images are used in the same way as PNG images. The SVG files that\nyou want to use in a project must be placed in the assets/images\nfolder. The TouchGFX Image Converter and TouchGFX Designer read the\nimages found in that folder."),(0,i.kt)("p",null,"SVG images are converted to CPP code and linked into the\napplication. This CPP code is saved in the file\n",(0,i.kt)("inlineCode",{parentName:"p"},"generated/images/src/SVGDatabase.cpp")),(0,i.kt)("p",null,"In the TouchGFX Designer SVG images are used with the SVGImage\nwidget. This widget allows scaling, translation, and rotation of the\nSVG."),(0,i.kt)("p",null,"As an example we will use this SVG:"),(0,i.kt)("pre",null,(0,i.kt)("code",g({parentName:"pre"},{}),'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n     width="100" height="100">\n  <circle cx="50" cy="50" r="40" fill="green" />\n  <polygon points="50,10 78,78 22,78" fill="gold" /> \n</svg>\n')),(0,i.kt)("p",null,"The SVG consists of a green circle with radius 40 and a yellow (golden) triangle."),(0,i.kt)("p",null,"The rendering of this SVG looks like this:"),(0,i.kt)(r.Z,{width:"25%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/arrow.png",mdxType:"Figure"},"Arrow SVG"),(0,i.kt)("p",null,"To use this SVG with TouchGFX we put the file (arrow.svg) in the ",(0,i.kt)("inlineCode",{parentName:"p"},"assets/images")," directory:"),(0,i.kt)(r.Z,{width:"70%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/explorer.png",mdxType:"Figure"},"SVG files are put in the assets/images folder"),(0,i.kt)("p",null,"In the TouchGFX Designer we can insert an SVGImage widget:"),(0,i.kt)(r.Z,{width:"70%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/designer.png",mdxType:"Figure"},"Inserting the SVGImage widget"),(0,i.kt)("p",null,"Using the properties of the SVGImage on the right, we can change the size of the widget and the scale:"),(0,i.kt)(r.Z,{width:"70%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/designer2.png",mdxType:"Figure"},"Showing the SVG arrow"),(0,i.kt)("p",null,'Note the "Fit Image To Size" check box. If you check it, the SVG is\nscaled to fit the size of the widget (and rotation is reset). This is\na helper function that allows you to resize the SVG by dragging the\ncorners of the Widget.'),(0,i.kt)(r.Z,{width:"70%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/designer3.png",mdxType:"Figure"},"Showing the SVG arrow three times"),(0,i.kt)("p",null,"To do the rotation as above it is important to set the rotation\ncenter. The default values are x=0, y=0, the upper left corner of the\nWidget. If we use this rotation center and rotate the SVG, it rotates\nclock-wise out to the left of the SVGImage Widget as illustrated in\nthe figure below:"),(0,i.kt)(r.Z,{width:"40%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/rotating-clipping.png",mdxType:"Figure"},"Showing the SVG arrow rotated 45 degrees around 0,0"),(0,i.kt)("p",null,"The parts of an SVG that are outside the SVGImage are clipped (not\nshown) as illustrated by the above figure. The gray rectangle\nrepresents SVGImage. To rotate the SVG inside the SVGImage we can set\nthe rotation center to the center of the widget (50, 50)."),(0,i.kt)("h3",g({},{id:"target-configuration"}),"Target configuration"),(0,i.kt)("p",null,"To use SVG images on a target you need to have Vector Rendering\nenabled in CubeMX. This inserts the required code in the project."),(0,i.kt)(a.Z,{mdxType:"Note"},"Vector Rendering is enabled in all TouchGFX Boards Specifications available in the TouchGFX Designer (except STM32G0)."),(0,i.kt)("p",null,"If Vector Rendering is not enabled you will get a linker error\n(",(0,i.kt)("em",{parentName:"p"},"undefined reference to `touchgfx::VectorRenderer::getInstance()"),") when\nbuilding the project:"),(0,i.kt)(r.Z,{width:"100%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/designer4.png",mdxType:"Figure"},"Linker error when Vector Rendering is not enabled"),(0,i.kt)("p",null,"This problem is resolved by changing the configuration in CubeMX. See\nalso the ",(0,i.kt)("a",g({parentName:"p"},{href:"../../touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/additional-features#vector-rendering"}),"Generator User\nGuide")),(0,i.kt)("h3",g({},{id:"running-on-target"}),"Running on target"),(0,i.kt)("p",null,"SVG images are automatically included in the target project as C++\ncode , so no further action is required."),(0,i.kt)("p",null,"The size of the generated SVG data for the arrow is below 350\nbytes. This shows one of the benefits using SVG compared to\nbitmaps. The size of the arrow in size 100x100 would be 30.000 bytes\nin 24bit colors. The size of the SVG is thus close to 1% of the size\nof bitmap."),(0,i.kt)("p",null,"The downside is the performance of drawing SVG images which is worse\nthan bitmaps in most cases. SVG images are rendered by software so the\nCPU-load is high. Bitmaps on the other hand can be rendered by the\nDMA2D accelerator giving a low CPU-load."),(0,i.kt)("p",null,"The picture below shows the project running on an STM32F746 Discovery kit:"),(0,i.kt)(r.Z,{width:"70%",imageSource:"/img/development/ui-development/touchgfx-engine-features/svg/f746.png",mdxType:"Figure"},"Showing the SVG arrows on a F746 Discovery kit"),(0,i.kt)("p",null,"On the right size of the photo we have inserted zoomed details from\nthe frame buffer (the three arrow points). This shows that the lines\nin the SVG are all anti-aliased, also when rotated and scaled. This is\nthe main reason to use SVG images: Preservation of quality during\nrotation and scaling."),(0,i.kt)("h2",g({},{id:"supported-elements"}),"Supported SVG elements"),(0,i.kt)("p",null,"TouchGFX does not implement the whole SVG Tiny 1.2 standard. The image\nconverter in TouchGFX that reads the .svg files will give you a\nwarning if you use any of the unsupported elements or attributes. The\nimportant missing parts radial gradient, texts, and animations."),(0,i.kt)("p",null,"TouchGFX supports the following SVG elements. The examples show the supported attributes of the element:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Rectangle ","<",'rect x="10" y="20" width="100" height="200" rx="5" ry="40" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Circle ","<",'circle cx="100" cy="200" r="20" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Ellipse ","<",'ellipse cx="100" cy="200" rx="20" ry="30" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Line ","<",'line x1="10" y1="10" x2="300" y2="150 /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Path ","<",'path d="M100 100L75 200h50z" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Polygon ","<",'polygon points="10,10 30,30 10,90" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Polyline ","<",'polyline points="10,10 30,30 10,90" /',">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"LinearGradient ","<",'lineargradient id="grad1" gradientUnits="objectBoundingBox" x1="0%" y1="0%" x2="100%" y2="100%" /',">"))),(0,i.kt)("p",null,"These structural elements are also supported"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Group ","<","g  /",">"),(0,i.kt)("li",{parentName:"ul"},"Defs ","<","defs  /",">")),(0,i.kt)("p",null,"TouchGFX supports all the shape transformations: matrix, translate, scale, rotate, skewX, skewY."),(0,i.kt)("p",null,"The linear gradients must be defined inside a ","<","defs",">"," element."),(0,i.kt)("p",null,"For the ","<","path",">"," element TouchGFX supports all the path commands: M, m, L, l, H,\nh, V, v, C, c, S, s, Q, q, T, t, A, a."),(0,i.kt)("p",null,"Filling and stroking is supported."),(0,i.kt)("h2",g({},{id:"unsupported-elements"}),"Unsupported SVG elements"),(0,i.kt)("p",null,"TouchGFX does not support the following elements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Animations ","<","animate",">",", ","<","animateColor",">",", ","<","animateMotion",">",", ","<","animateTransform",">",", ","<","discard",">",", ","<","handler",">",", ","<","listener",">",", ","<","mpath",">",", ","<","script",">",", ","<","set",">",", ","<","switch",">"),(0,i.kt)("li",{parentName:"ul"},"Audio ","<","audio /",">"),(0,i.kt)("li",{parentName:"ul"},"ClipPath ","<","clipPath id=.... /",">"),(0,i.kt)("li",{parentName:"ul"},"Desc ","<","desc /",">"),(0,i.kt)("li",{parentName:"ul"},"Filter ","<","filter",">"),(0,i.kt)("li",{parentName:"ul"},"Foreign Object ","<","foreignObject",">"),(0,i.kt)("li",{parentName:"ul"},"Gradient transform ","<",'linearGradient gradientTransform="..." /',">",", ","<","prefetch",">"),(0,i.kt)("li",{parentName:"ul"},"Radial gradient ","<","radialGradient ...  /",">"),(0,i.kt)("li",{parentName:"ul"},"Solid color ","<","solidColor",">"),(0,i.kt)("li",{parentName:"ul"},"Stroke dasharray property ","<",'path stroke-dasharray="10,10" ... /',">"),(0,i.kt)("li",{parentName:"ul"},"Text and fonts ","<","font",">",", ","<","glyph",">",", ","<","text",">",", ","<","hkern",">",", ","<","missing-glyph",">",", ","<","tbreak",">",", ","<","textArea",">",", ","<","tspan",">"),(0,i.kt)("li",{parentName:"ul"},"Use ","<","use",">"),(0,i.kt)("li",{parentName:"ul"},"Image ","<","image",">"),(0,i.kt)("li",{parentName:"ul"},"Video ","<","video",">")),(0,i.kt)("p",null,"Metadata and title elements are ignored."),(0,i.kt)("h2",g({},{id:"related-articles"}),"Related articles"),(0,i.kt)("p",null,"As mentioned above the vector graphics support for target project is\nconfigured in the TouchGFX Generator.  See the ",(0,i.kt)("a",g({parentName:"p"},{href:"../../touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/vector-graphics"}),"Generator User\nGuide"),"\nfor instructions."),(0,i.kt)("p",null,"The SVGImage widget is available in the Designer. The use of SVGImage\nwidget in the Designer is detailed\n",(0,i.kt)("a",g({parentName:"p"},{href:"../ui-components/images/svg-image"}),"here"),"."))}y.isMDXComponent=!0}}]);