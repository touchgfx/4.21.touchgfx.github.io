<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/touchgfx-on-gpu2d">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/zh-CN/opensearch.xml">
<script src="/4.21/zh-CN/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">TouchGFX on NeoChrom | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/zh-CN/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/zh-CN/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TouchGFX on NeoChrom | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/development/scenarios/touchgfx-on-gpu2d" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/zh-CN/assets/css/styles.2fc40eaa.css">
<link rel="preload" href="/4.21/zh-CN/assets/js/runtime~main.334fafd6.js" as="script">
<link rel="preload" href="/4.21/zh-CN/assets/js/main.ac793cb9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">跳转到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/zh-CN/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a href="/4.21/docs/development/scenarios/touchgfx-on-gpu2d" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/development/scenarios/touchgfx-on-gpu2d" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/development/scenarios/touchgfx-on-gpu2d" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">简体中文</a></li><li><a href="/4.21/zh-TW/docs/development/scenarios/touchgfx-on-gpu2d" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/zh-CN/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社区</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-CN/docs/category/introduction">介绍</a><button aria-label="Toggle the collapsible sidebar category &#x27;介绍&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-CN/docs/category/basic-concepts">基本概念</a><button aria-label="Toggle the collapsible sidebar category &#x27;基本概念&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/zh-CN/docs/development/development-introduction">开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;开发&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-CN/docs/development/hardware-selection/hardware-selection-introduction">硬件选择</a><button aria-label="Toggle the collapsible sidebar category &#x27;硬件选择&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-CN/docs/development/board-bring-up/board-introduction">驱动板卡</a><button aria-label="Toggle the collapsible sidebar category &#x27;驱动板卡&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX AL开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.21/zh-CN/docs/development/ui-development/ui-development-introduction">UI开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.21/zh-CN/docs/category/scenarios-2">场景</a><button aria-label="Toggle the collapsible sidebar category &#x27;场景&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware">低成本硬件上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d">TouchGFX on NeoChrom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">通过部分帧缓冲降低内存使用率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/using-non-memory-mapped-flash">使用非内存映射闪存存储图像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/using-serial-flash">使用串行闪存存储图像和字体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/fonts-in-unmapped-flash">使用非内存映射闪存存储字体数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/scenarios-change-pixelformat-bpp">更改应用的像素格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/scenarios-create-at">创建TouchGFX应用模板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/example-gpio">外部事件作为触发器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/running-without-rtos">在无RTOS的情况下基于TouchGFX硬件模板上运行项目</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/zh-CN/docs/development/scenarios/adding-files-to-stm32cubemx-projet">向STM32CubeMX工程中添加文件</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-CN/docs/category/miscellaneous-1">其他情况</a><button aria-label="Toggle the collapsible sidebar category &#x27;其他情况&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-CN/docs/category/tutorials">指导</a><button aria-label="Toggle the collapsible sidebar category &#x27;指导&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/zh-CN/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/zh-CN/docs/category/resources">资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;资源&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/zh-CN/docs/development/development-introduction"><span itemprop="name">开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/zh-CN/docs/category/scenarios-2"><span itemprop="name">场景</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TouchGFX on NeoChrom</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">在当前页面</button></div><div class="theme-doc-markdown markdown"><header><h1>TouchGFX on NeoChrom</h1></header><p>This section discusses how to use TouchGFX on hardware having the NeoChrom graphics accelerator. This graphics accelerator improves the performance significantly for operations like texture mapping, image scaling and rotation. This means that more advanced UIs can be built while still keeping a high frame rate.</p><p>The NeoChrom graphics accelerator is currently only available in the STM32U5x9 microcontrollers as found on e.g. STM32U599 Discovery Kit.</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/stm32u599-dk-bsd-menu.webp" target="_blank"><img width="30%" src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/stm32u599-dk-bsd-menu.webp"></a><p>STM32U599 Discovery Board</p></div><p>The NeoChrom accelerator is also known by the name GPU2D in source code and in CubeMX.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="neochrom-graphical-capabilities">NeoChrom Graphical Capabilities<a class="hash-link" href="#neochrom-graphical-capabilities" title="直接链接到标题">​</a></h2><p>The NeoChrom accelerator is capable of performing basic blitting (drawing images), blending, scaling, rotation, and texture mapping. All suce operations are automatically used by TouchGFX when running on a microcontroller with NeoChrom.</p><p>Compared to the DMA2D graphics accelerator NeoChrom is capable of accelerating more graphical operations and has a richer feature set:</p><table><thead><tr><th><strong>Graphic feature</strong></th><th><strong>DMA2D</strong></th><th><strong>GPU2D</strong></th></tr></thead><tbody><tr><td>Supported formats (with TouchGFX)</td><td>ARGB8888, RGB888, RGB565, A8, A4, L8</td><td>ARGB8888, RGB888, RGB565, A8, A4, A2, A1</td></tr><tr><td>Command list based</td><td>No</td><td>Yes</td></tr><tr><td>Drawing</td><td>Rectangles</td><td>Rectangles, Pixels, Line, Triangle, Quadrilaterals with  multi-sample anti-aliasing (MSAA)</td></tr><tr><td>Blitting</td><td>Copy, alpha blending, pixel format conversion</td><td>Copy, alpha blending, pixel format conversion, color keying</td></tr><tr><td>Texture Mapping</td><td>No</td><td>Yes</td></tr></tbody></table><p>With these capabilities available even more TouchGFX Widgets are accelerated with NeoChrom:</p><table><thead><tr><th><strong>Widget</strong></th><th><strong>DMA2D</strong></th><th><strong>GPU2D</strong></th></tr></thead><tbody><tr><td>Box, BoxWithBorder</td><td>Yes</td><td>Yes</td></tr><tr><td>Image, AnimatedImage, TiledImage, SnapshotWidget</td><td>Yes</td><td>Yes</td></tr><tr><td>Button, ButtonWithIcon, ButtonWithLabel, ToggleButton</td><td>Yes</td><td>Yes</td></tr><tr><td>RadioButton, RepeatButton</td><td>Yes</td><td>Yes</td></tr><tr><td>PixelDataWidget</td><td>Yes</td><td>Yes</td></tr><tr><td>TextArea, TextAreaWithWildcard, Keyboard</td><td>Partly</td><td>Yes</td></tr><tr><td>ScalableImage</td><td>No</td><td>Yes</td></tr><tr><td>TextureMapper, AnimatedTextureMapper</td><td>No</td><td>Yes</td></tr><tr><td>Circle, Line, Graph, Gauge</td><td>No</td><td>No</td></tr></tbody></table><p>The operations that are not hardware accelerated are software rendered (implying a higher CPU-load, and lower performance). As the table above shows, NeoChrom can accelerate widgets like ScalableImage and TextureMapper. This means that we can use those widgets to a greater extent while keeping a high performance.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rendering-time-improvements-with-neochrom">Rendering Time Improvements with NeoChrom.<a class="hash-link" href="#rendering-time-improvements-with-neochrom" title="直接链接到标题">​</a></h2><p>The following examples illustrate the speed-up provided by NeoChrom over DMA2D and software rendering. We have created two projects with the Designer. The first project shows an Image on a Box background. The second project shows a TextureMapper Widget on a Box background. The widget is redrawn in every frame.  In both cases the bitmap is of size 128x128, in ARGB8888 format, and stored in the internal flash. The framebuffer is in RGB565 format.</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/designer-image.webp" target="_blank"><img width="40%" src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/designer-image.webp"></a><p>The Image project</p></div><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/designer-texturemapper.webp" target="_blank"><img width="40%" src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/designer-texturemapper.webp"></a><p>The TextureMapper project</p></div><p>Both projects have been executed on a STM32F746 and a STM32U599 Discovery board.</p><p>We have measured the rendering times by connecting a GPIO to a logic analyzer:</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-f746-image.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-f746-image.webp"></a><p>STM32F746 running the Image project</p></div><p>The figure above shows the frame rate and rendering time when runninng on the STM32F746. Channel 00 shows the VSYNC signal. We see that the display runs with a frame interval of 16.9 ms (A1 to A2) corresponding to a frame rate of 59.2 Hz. Channel 01 shows the render time (high when rendering, B1 to B2). The time to render the Image is thus 1.3 ms. Image rendering is fast on the STM32F746.</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-f746-texturemapper.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-f746-texturemapper.webp"></a><p>STM32F746 running the TextureMapper project</p></div><p>The figure above is the texture mapper project running on the STM32F746. The rendering time of the TextureMapper is 4.5 ms. The TextureMapper widget is much slower than the Image.</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-u599-image.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-u599-image.webp"></a><p>STM32U599 running the Image project</p></div><p>Here is the STM32U599 Discovery kit running the Image project. The STM32U599 Discovery kit display has a display frame interval of 12.26 ms corresponding to a frame rate of 81.6 Hz. The render time of the Image is 0.7 ms. We see that the Image widget is faster than on the STM32F746 kit.</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-u599-texturemapper.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/render-time-u599-texturemapper.webp"></a><p>STM32U599 running the TextureMapper project</p></div><p>The render time of the TextureMapper is 1.7 ms. The TextureMapper is also faster on STM32U599 than on the STM32F746.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rendering-time-summary">Rendering Time Summary<a class="hash-link" href="#rendering-time-summary" title="直接链接到标题">​</a></h3><p>The table below shows the rendering times:</p><table><thead><tr><th><strong>Element</strong></th><th><strong>STM32F746</strong></th><th><strong>STM32U599</strong></th><th><strong>Speed up</strong></th></tr></thead><tbody><tr><td>Frequency</td><td>200 MHz</td><td>160 MHz</td><td>0.8</td></tr><tr><td>Image</td><td>1.3 ms</td><td>0.7 ms</td><td>~2x</td></tr><tr><td>TextureMapper</td><td>4.5 ms</td><td>1.7 ms</td><td>~3x</td></tr></tbody></table><p>We see that even with a reduced clock frequency the STM32U599 greatly outperforms the STM32F746, especially with the TextureMapper.</p><p>These measurements are taken with the image in internal flash and the framebuffer in external SDRAM for STM32F746. The framebuffer is in internal SRAM for the STM32U599 (as this will be typical scenario). Moving the image to external flash hurts the STM32F746 as it uses QSPI flash (4-bit bus), whereas the STM32U599 uses a faster OSPI flash (8-bit bus).</p><p>The STM32F746 Discovery kit can run with a 480x272 RGB565 framebuffer in the internal RAM. This improves the performance (Image down to 1.03 ms), but it is not the standard configuration for STM32F746, as it uses a very large part of the internal SRAM for the frame buffer, leaving little RAM for other application components.<br>
<!-- -->Running with a single frame buffers is also not suitable for all applications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="richer-user-interfaces">Richer User Interfaces<a class="hash-link" href="#richer-user-interfaces" title="直接链接到标题">​</a></h3><p>The improved rendering performance can be used to create user interfaces with more advanced animations. For example more scaled or rotated elements.<br>
<!-- -->For the STM32F746, the frame refresh time was 16.8 ms. This means that the application must keep the render time below this to keep a frame rate of 60 fps. We can therefore have at most 3.75 texture mappers of that complexity (16.8 ms / 4.48 ms) on the screen, or a single larger texture mapper of size 247 x 247 (the same number of pixels and approximately the same rendering time).<br>
<!-- -->If we assume the same screen refresh rate, but use the STM32U599 CPU, we can have 14.36 texture mappers (16.8 ms / 1.17 ms), or a single texture mapper of size 485 x 485.</p><p>The following figure shows two applications running on respectively the STM32F746 and the STM32U599. The idea is to make a carousel-like menu where elements are scaled up when going to the center and scaled down when going out (here we just use the same texture for all the elements).</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/comparison-f746-u599.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/comparison-f746-u599.webp"></a><p>STM32F746 (left) and STM32U599 (right) running the texture mapper based carousel project</p></div><p>The STM32F746 is capable of showing three icons, one big icon, scaled up by a factor of 1.9, and two smaller icons. The STM32U599 is capable of showing 7 icons. The largest icon is scaled up by factor 2.7.</p><p>The rendering time of the application with 3 icons on the STM32F746 is 14.38 ms. The rendering time of the application with 7 icons on the STM32U599 is 14.93 ms. Both UIs can thus run in 60 fps, with the STM32U599 showing much more content in a higher resolution.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-project">Creating a project<a class="hash-link" href="#creating-a-project" title="直接链接到标题">​</a></h2><p>CubeMX and the TouchGFX Generator supports the NeoChrom. In CubeMX the accelerator is known by its code name GPU2D. The GPU2D accelerator is only available to TouchGFX if GPU2D is enabled in the TouchGFX configuration in CubeMX.<br>
<!-- -->If you use the STM32U599 TBS (template project) provided with the TouchGFX Designer this is already done. If you make your own custom project, make sure to enable the GPU2D Accelerator as shown below:</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/cubemx-u599-configuration.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/cubemx-u599-configuration.webp"></a><p>Enabling GPU2D (NeoChrom) in CubeMX</p></div><p>After enabling GPU2D press &quot;Generate Code&quot; in CubeMX. This regenerates the target configuration code. Now open the project in the TouchGFX Designer and generate code there also (F4).</p><p>The Designer generates assets (images, fonts, and texts) and simulator code, that matches the target configuration. You are now ready to compile the code with IAR.</p><p>If you are starting a project from the Designer there is no need to open CubeMX unless you need to change some hardware settings.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-ides">Supported IDEs<a class="hash-link" href="#supported-ides" title="直接链接到标题">​</a></h2><p>The STM32U599 TBS (version 3.0.0) is currently only supported with IAR Workbench.</p><p>A recent version of IAR is required (8.5x.x). Make sure that the processor variant (STM32U599NJ for the Discovery board) is supported by checking the General Options:</p><div class="figure"><a href="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/iar-configuration.webp" target="_blank"><img src="/4.21/zh-CN/img/development/scenarios/touchgfx-on-gpu2d/iar-configuration.webp"></a><p>IAR General Options</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="framebuffer-formats">Framebuffer Formats<a class="hash-link" href="#framebuffer-formats" title="直接链接到标题">​</a></h2><p>The STM32U599 discovery board supports three framebuffer formats: RGB565, RGB888, ARGB8888. These are configurable from CubeMX.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="neochrom-limitations">NeoChrom Limitations<a class="hash-link" href="#neochrom-limitations" title="直接链接到标题">​</a></h2><p>The NeoChrom graphics accelerator in STM32U599 does not support the L8 image formats (L8_RGB565, L8_RGB888, L8_ARGB8888).<br>
<!-- -->If you use these image formats in a TouchGFX application running on STM32U599 the images will be drawn using DMA2D. If you use these formats with ScalableImage or TextureMapper a software fallback will be used.</p><p>It is therefore recommended to not use L8 images with STM32U599.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档页面导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware"><div class="pagination-nav__sublabel">上一个</div><div class="pagination-nav__label">低成本硬件上的TouchGFX</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer"><div class="pagination-nav__sublabel">下一个</div><div class="pagination-nav__label">通过部分帧缓冲降低内存使用率</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#neochrom-graphical-capabilities" class="table-of-contents__link toc-highlight">NeoChrom Graphical Capabilities</a></li><li><a href="#rendering-time-improvements-with-neochrom" class="table-of-contents__link toc-highlight">Rendering Time Improvements with NeoChrom.</a><ul><li><a href="#rendering-time-summary" class="table-of-contents__link toc-highlight">Rendering Time Summary</a></li><li><a href="#richer-user-interfaces" class="table-of-contents__link toc-highlight">Richer User Interfaces</a></li></ul></li><li><a href="#creating-a-project" class="table-of-contents__link toc-highlight">Creating a project</a></li><li><a href="#supported-ides" class="table-of-contents__link toc-highlight">Supported IDEs</a></li><li><a href="#framebuffer-formats" class="table-of-contents__link toc-highlight">Framebuffer Formats</a></li><li><a href="#neochrom-limitations" class="table-of-contents__link toc-highlight">NeoChrom Limitations</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/zh-CN/assets/js/runtime~main.334fafd6.js"></script>
<script src="/4.21/zh-CN/assets/js/main.ac793cb9.js"></script>
</body>
</html>