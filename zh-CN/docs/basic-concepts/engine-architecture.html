<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-basic-concepts/engine-architecture">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/zh-CN/opensearch.xml">
<script src="/4.21/zh-CN/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">Engine Architecture | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/zh-CN/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/zh-CN/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/zh-CN/docs/basic-concepts/engine-architecture"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Engine Architecture | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/zh-CN/docs/basic-concepts/engine-architecture"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/basic-concepts/engine-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/basic-concepts/engine-architecture" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/basic-concepts/engine-architecture" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/basic-concepts/engine-architecture" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/basic-concepts/engine-architecture" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/basic-concepts/engine-architecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/zh-CN/assets/css/styles.a3789d89.css">
<link rel="preload" href="/4.21/zh-CN/assets/js/runtime~main.247b8714.js" as="script">
<link rel="preload" href="/4.21/zh-CN/assets/js/main.5c4f75fb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/zh-CN/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a href="/4.21/docs/basic-concepts/engine-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/basic-concepts/engine-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.21/ja/docs/basic-concepts/engine-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/basic-concepts/engine-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">简体中文</a></li><li><a href="/4.21/zh-TW/docs/basic-concepts/engine-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/zh-CN/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/zh-CN/docs/basic-concepts/engine-architecture">4.21</a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Engine Architecture</h1></header><p><em>Graphics is ultimately about getting something to show up on a physical display. Fast.</em></p><p>The term embedded graphics means many things.</p><p>First of, the word embedded means different things to different people.
To some an embedded system means a very dependable old 8 bit microcontroller, with no operating system, and virtually no RAM, ROM or GPIO.
To others it might mean a modern day smart phone with gigabytes of everything.</p><p>Secondly, the word graphics has many interpretations.
To some it means drawing your own pixels in your favourite painting program.
To others again it means the 3D rendering software running on your gaming console.</p><p>To TouchGFX embedded systems mean any system based on an STM32 microcontroller.
And graphics means interactive applications running at 60 frames per second.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-four-parts">The four parts<a class="hash-link" href="#the-four-parts" title="标题的直接链接">​</a></h2><p>In order to do graphics applications on such platforms, we consider four main components directly involved.
Naturally many more components might be present in an embedded system, but these are less related to the display of graphics.</p><div class="figure noshadow"><a href="/4.21/zh-CN/img/basic-concepts/four-parts.svg" target="_blank"><img width="480" src="/4.21/zh-CN/img/basic-concepts/four-parts.svg"></a><p>MCU, RAM, Flash and display</p></div><p>In short, TouchGFX, using the MCU, creates and updates an image in RAM, by assembling parts from flash. The assembled image is transferred to the display. This process is repeated as often as possible and needed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu">MCU<a class="hash-link" href="#mcu" title="标题的直接链接">​</a></h3><p>The MCU is doing all the heavy lifting in this process.
It reads images in flash and writes them to RAM.
It calculates the resulting colors when merging a semi-transparent red text onto an image and saves these to RAM.
It renders and stores all the pixels of a circle to RAM.
And so on.</p><p>STM32 MCUs have specific capabilities that help in the realization of graphics.
See <a href="/4.21/zh-CN/docs/development/hardware-selection/hardware-components/hardware-selection-mcu">MCU</a> for details on different MCUs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ram">RAM<a class="hash-link" href="#ram" title="标题的直接链接">​</a></h3><p>RAM is where the calculated image is stored.
The RAM is being read and written by the MCU.
And read again when the resulting image is transferred to the display.</p><p>In many cases the RAM is internal to the MCU.
In cases where it is not feasible to have the resulting image in internal RAM, external RAM can be added to the setup.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flash">Flash<a class="hash-link" href="#flash" title="标题的直接链接">​</a></h3><p>Flash is where all static data is placed. Images, fonts and texts.
The flash is read by the MCU and the contents written to or combined with the RAM.</p><p>Most often an external flash is added to the setup, as the internal flash is seldomly large enough to hold all graphics assets.</p><p>Ideally the flash is memory mapped, such that pixels can be read directly from the flash and written to RAM. Otherwise, the contents of the flash can be buffered in RAM and then read from there instead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="display">Display<a class="hash-link" href="#display" title="标题的直接链接">​</a></h3><p>The display is where the image is actually displayed to the eyes of a person.</p><p>The image stored in RAM is sent by the MCU to the display at regular intervals.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="标题的直接链接">​</a></h2><p>In order to achieve smooth animations on this setup and ultimately on the display, some care must be taken when doing embedded graphics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-strategy">General strategy<a class="hash-link" href="#general-strategy" title="标题的直接链接">​</a></h3><p>A few general points to always consider:</p><ul><li>Do not spend time drawing things that do not change</li><li>Transfer as little as possible from flash to RAM</li><li>Transfer as little as possible from RAM to display</li><li>Find the right balance between quality of graphics and speed of animations</li><li>Utilize hardware capabilities</li></ul><p>The TouchGFX Engine helps address all of these points, but care must be taken by the developer as well.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-specific-strategy">Setup specific strategy<a class="hash-link" href="#setup-specific-strategy" title="标题的直接链接">​</a></h3><p>The vast amount of possible embedded setups means that what can be realized on a specific setup is very different to what is possible on another setup.</p><p>A ballpark&#x27;ish overview of possible setups are</p><ul><li>STM32 MCU<ul><li>50 to 500 MHz clock rate</li><li>A possible range of graphics related IP&#x27;s: Chrom-ART, Chrom-GRC, JPEG codec, ...</li></ul></li><li>RAM<ul><li>0 to 1 MB internal</li><li>0 to 100 MB external</li></ul></li><li>Flash<ul><li>0 to 1 MB internal</li><li>0 to 1 GB external</li></ul></li><li>Display<ul><li>1 to 24 bit colors</li><li>100x100 to 1000x1000 pixels</li></ul></li></ul><p>It is evident that the UI applications that are realizable on one possible setup, might not be nowhere near realizable on another. Therefore great care must be taken to align the desired UI application with the actual setup.</p><p>TouchGFX is designed from the ground up for these setups, focusing on making the most of the STM32 MCU capabilities and minimizing the amount of RAM and flash needed.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><li>See <a href="https://www.st.com/en/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus.html" target="_blank" rel="noopener noreferrer">STM32 32-bit Arm Cortex MCUs</a> for available STM32 microcontrollers.</li><li>See <a href="/4.21/zh-CN/docs/development/hardware-selection/hardware-components/hardware-selection-display">Display</a> for details on the possible display choices.</li><li>See <a href="/4.21/zh-CN/docs/development/hardware-selection/hardware-components/hardware-selection-mcu">MCU</a> for details on the possible MCU choices.</li><li>See <a href="/4.21/zh-CN/docs/development/hardware-selection/hardware-components/hardware-selection-external-memories">External Memories</a> for details on the possible choices for memory.</li></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-four-parts" class="table-of-contents__link toc-highlight">The four parts</a><ul><li><a href="#mcu" class="table-of-contents__link toc-highlight">MCU</a></li><li><a href="#ram" class="table-of-contents__link toc-highlight">RAM</a></li><li><a href="#flash" class="table-of-contents__link toc-highlight">Flash</a></li><li><a href="#display" class="table-of-contents__link toc-highlight">Display</a></li></ul></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a><ul><li><a href="#general-strategy" class="table-of-contents__link toc-highlight">General strategy</a></li><li><a href="#setup-specific-strategy" class="table-of-contents__link toc-highlight">Setup specific strategy</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.21/zh-CN/assets/js/runtime~main.247b8714.js"></script>
<script src="/4.21/zh-CN/assets/js/main.5c4f75fb.js"></script>
</body>
</html>