<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-basic-concepts/operating-system">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.21/ko/opensearch.xml">
<script src="/4.21/ko/js/one-trust.js"></script>
<script src="/4.21/js/fix-location.js"></script><title data-rh="true">운영 체제 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.21/ko/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.21/ko/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.21/ko/docs/basic-concepts/operating-system"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="운영 체제 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.21/ko/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.21/ko/docs/basic-concepts/operating-system"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/basic-concepts/operating-system" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ko/docs/basic-concepts/operating-system" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/ja/docs/basic-concepts/operating-system" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-CN/docs/basic-concepts/operating-system" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/zh-TW/docs/basic-concepts/operating-system" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.21/docs/basic-concepts/operating-system" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.21/ko/assets/css/styles.3ea4e563.css">
<link rel="preload" href="/4.21/ko/assets/js/runtime~main.9a3e1987.js" as="script">
<link rel="preload" href="/4.21/ko/assets/js/main.9f769501.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region"><a href="#" class="skipToContent_fXgn">주요 내용으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.21/ko/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.21/ko/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/4.21/ko/img/logo.svg" alt="TouchGFX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">한국어</a><ul class="dropdown__menu"><li><a href="/4.21/docs/basic-concepts/operating-system" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.21/ko/docs/basic-concepts/operating-system" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">한국어</a></li><li><a href="/4.21/ja/docs/basic-concepts/operating-system" target="_self" rel="noopener noreferrer" class="dropdown__link">日本語</a></li><li><a href="/4.21/zh-CN/docs/basic-concepts/operating-system" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.21/zh-TW/docs/basic-concepts/operating-system" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.21/ko/docs/introduction/welcome">4.21</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.21/ko/docs/basic-concepts/operating-system">4.21</a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="검색하기"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">검색하기</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ko/docs/category/introduction">Introduction</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Introduction&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.21/ko/docs/category/basic-concepts">Basic Concepts</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Basic Concepts&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/embedded-graphics">임베디드 그래픽</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/color-formats">색상 형식</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/framebuffer">프레임버퍼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/graphics-engine">그래픽 엔진</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/rendering">메인 루프</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/performance">성능</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.21/ko/docs/basic-concepts/operating-system">운영 체제</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.21/ko/docs/basic-concepts/memory-usage">메모리 사용량</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ko/docs/development/development-introduction">Development</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Development&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ko/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Miscellaneous&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ko/docs/category/tutorials">Miscellaneous</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Miscellaneous&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.21/ko/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.21/ko/docs/category/resources">Resources</a><button aria-label="접을 수 있는 사이드바 카테고리 &#x27;Resources&#x27; 토글" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.21/ko/docs/category/basic-concepts"><span itemprop="name">Basic Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">운영 체제</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>운영 체제</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">서론<a class="hash-link" href="#introduction" title="제목에 대한 직접 링크">​</a></h2><p>이 섹션에서는 그래픽 사용자 인터페이스 애플리케이션의 운영 체제 사용에 대해 알아보겠습니다.</p><p>임베디드 장치는 갈수록 진화하고 있습니다. 대부분의 운영 체제가 그래픽 사용자 인터페이스뿐만 아니라 복잡한 제어 알고리즘과 작업까지 처리하기 때문입니다.</p><p>예를 들면 모터 제어, 데이터 수집, 보안 관련 작업 등이 있습니다. 오늘날 대부분의 장치에는 데이터 센터와의 통신을 위한 TCP/IP 같은 통신 프로토콜 스택이, 또는 다른 로컬 장치와의 통신을 위한 블루투스 같은 무선 스택이 포함되어 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interleaving-other-tasks-with-the-user-interface">다른 작업과 사용자 인터페이스의 교차 실행<a class="hash-link" href="#interleaving-other-tasks-with-the-user-interface" title="제목에 대한 직접 링크">​</a></h3><p>에그 타이머와 같이 그래픽 사용자 인터페이스와 몇 가지 단순한 지원 작업이 포함된 장치에서는 사용자 인터페이스 코드를 중심으로 전체 애플리케이션을 구성할 수 있습니다. 이러한 경우에는 애플리케이션이 정기적인 사용자 인터페이스 업데이트를 제외하고 다른 작업을 거의 수행하지 않기 때문에 다른 실행 작업을 사용자 인터페이스 코드에 삽입하는 데 별 문제가 없습니다.</p><p>하지만 모터 조절과 같은 타이밍 요건과 함께 “백그라운드에서 실행”되는 고급 기능을 추가하게 되면 타이밍 요건을 지원하는 동시에 두 가지 작업을 사용자 인터페이스에 통합하기가 어려워집니다.</p><p>이전 섹션에서도 언급했지만 그래픽 엔진은 새로운 프레임을 끊임없이 그려서 자연스러운 사용자 인터페이스를 지원해야 합니다. 그래픽 엔진이 다른 작업을 실행하느라 그리기를 멈춘다면 프레임 속도가 떨어지게 됩니다. 마찬가지로 다른 작업들이 프레임 사이에, 즉 유휴 시간에만 실행된다고 가정할 경우 사용자 인터페이스가 복잡한 장면을 렌더링하여 유휴 시간이 비교적 적을 때는 다른 작업들이 어렵습니다. 이러한 이유들로 인해 UI 작업을 다른 복잡한 작업과 번갈아 가며 수동으로 실행하기가 매우 까다롭습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="an-example">예시<a class="hash-link" href="#an-example" title="제목에 대한 직접 링크">​</a></h3><p>이제부터 디스플레이가 장착된 블루투스 스피커를 개발한다고 가정하겠습니다. 여기서 크게 세 가지 작업을 수행해야 하는데, 바로 그래픽 사용자 인터페이스 실행, 스피커에 음악 전송, 다른 장치와 통신할 수 있는 블루투스 스택 처리입니다.</p><p>사용자 인터페이스 기반 애플리케이션 아키텍처의 성능 저하 여부를 알아보는 것은 어렵지 않습니다. 예를 들어 음악 코드를 사용자 인터페이스와 블렌딩한 후 사용자 인터페이스의 버튼 이벤트 핸들러로 재생을 시작할 수 있도록 코드를 삽입합니다. 이제 음악을 시작하는 동안 사용자 인터페이스가 잠깁니다. 애니메이션 실행도 중단됩니다.</p><p>일반적으로 사용자 인터페이스의 응답은 음악 작업(시작, 정지, 다음 등)이 실행되는 시간에 따라 달라집니다. 이는 일반적인 문제로, 나중에 자세히 살펴보겠습니다.</p><p>그렇다면 블루투스에서도 음악을 시작하고 싶다면 어떻게 될까요? 사용자 인터페이스도 어떤 식으로든 여기에 연관되어야 할까요?</p><p>또한 음악이 멈추지 않게 하려면 음악 작업에 우선순위를 어떻게 부여해야 할까요? 이와 동시에 실행할 음악 작업이 없을 때는 사용자 인터페이스의 실행 성능을 극대화하려고 합니다.</p><p>작업, 통신 수단 및 동기화를 모두 갖춘 운영 체제를 사용하면 이러한 문제를 모두 해결할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rtos">RTOS<a class="hash-link" href="#rtos" title="제목에 대한 직접 링크">​</a></h2><p>실시간 운영 체제(RTOS)는 간단한 소프트웨어로서 다양한 서비스로 애플리케이션을 지원하는 동시에 컴퓨팅 리소스를 애플리케이션 작업에 할당합니다.</p><p>RTOS를 사용하면 독립적이지만 서로 연계된 작업들로 애플리케이션을 구성할 수 있습니다. 구조화를 마친 작업들은 필요할 때 우선순위에 따라 RTOS를 통해 함께 실행됩니다.</p><p>작업을 높은 우선순위와 낮은 우선순위로 나눌 수도 있습니다. 블루투스 데이터가 수신되면 데이터를 버퍼에서 매우 빠르게 읽어와서 용량이 더 큰 애플리케이션 버퍼에 저장해야 한다고 가정하겠습니다. 이때 데이터 처리가 잠시 지연될 수 있지만 이러한 방식으로 결국 두 가지 블루투스 작업을 마치게 됩니다.</p><p>예를 들어 아래와 같이 main에서 네 가지 작업을 시작합니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_start_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gui_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">      medium_priority</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_start_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">music_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">    low_priority</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_start_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bt_comm_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">  high_priority</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_start_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bt_appl_task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">  low_priority</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_start_scheduler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>음악 작업에서도 비슷한 분할이 가능하여 데이터를 스피커에 전송하는 작업에 높은 우선순위를, 그리고 재생하는 노래를 제어하는 작업이나 사용자 인터페이스에 알림을 전송하는 작업에 낮은 우선순위를 부여할 수 있습니다.</p><p>위와 같이 우선순위를 다르게 사용하면 처리할 데이터가 있을 때 bt_comm_task가 실행되고, 그렇지 않을 때 사용자 인터페이스 작업이 실행됩니다. 사용자 인터페이스 작업이 디스플레이 신호를 기다릴 때는 우선순위가 낮은 작업 2개가 실행됩니다. 운영 체제 스케줄러가 이러한 시간 분배를 자동으로 처리합니다.</p><p>일반적인 TouchGFX 애플리케이션에서는 사용자 인터페이스가 모든 프레임에서 디스플레이 신호를 기다릴 뿐만 아니라 그래픽 가속기인 ChromArt가 요소 그리기를 마칠 때까지 주기적으로 기다립니다. 이는 잠깐씩 정지되는 일이 많고, 이때 우선순위가 낮은 작업들이 실행된다는 것을 의미합니다. 우선순위가 높은 작업들이 기다릴 때 운영 체제 스케줄러가 MCU를 자동으로 변경하여 우선순위가 낮은 작업들을 실행합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-communication">작업 통신<a class="hash-link" href="#task-communication" title="제목에 대한 직접 링크">​</a></h3><p>다수의 작업들을 사용할 때는 작업 사이에서 안전하게 통신할 수 있는 방법도 필요합니다. 간단한 예로, 사용자 인터페이스에서 음악 작업으로 통신하는 경우를 들어보겠습니다. 여기에서는 다른 무엇보다 gui_task가 음악 재생을 시작하도록 요청할 때까지 음악 작업이 기다려야 합니다. 이때는 메시지 대기열을 사용하면 간단하게 해결할 수 있습니다. 그러면 대기열에 메시지가 있을 때까지 음악 작업이 대기합니다. 이후 메시지가 대기열로 전송되고 우선순위가 더욱 높은 작업이 없으면 스케줄러가 음악 작업을 실행합니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   music_task_input_queue </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">os_create_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//10 element queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>사용자 인터페이스에서 &quot;Play&quot;를 누르면 메시지가 음악 작업의 대기열로 전송됩니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ScreenMusic</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">handlePlayPressed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">os_send_message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">music_task_input_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> play_message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>음악 작업은 대기열을 읽으면서 메시지를 기다립니다. 이를 통해 메시지가 수신될 때까지 음악 작업이 차단됩니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Message message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">os_receive_message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">music_task_input_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>메시지가 음악 작업 대기열에 추가된 후에도 사용자 인터페이스는 계속 실행되어 프레임을 최대한 빠르게 렌더링합니다. 재생 메시지를 바로 처리하는 데 시간을 소비하지 않습니다. 오히려 렌더링이 완료되어 UI 작업이 다음 프레임을 렌더링할 때까지 기다리는 동안 스케줄러가 음악 작업으로 바꿔 실행하여 수신되는 메시지를 처리합니다.</p><p>마찬가지로 사용자 인터페이스에도 입력 대기열을 부여할 수 있습니다. 그러면 예를 들어 노래가 끝났을 때 음악 작업이 알림 메시지를 전송할 수 있습니다. 사용자 인터페이스가 메시지를 기다릴 필요는 없지만 차단 없이 메시지 유무를 빠르게 확인하여 메시지를 읽습니다.</p><p>이러한 설정은 시스템에서 작업 사이에 매우 느슨한 연결을 구성합니다. 실제로 사용자 인터페이스를 사용하지 않고 음악 작업을 테스트하거나, 블루투스 작업에서도 음악을 손쉽게 재생할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-interrupts">인터럽트 처리<a class="hash-link" href="#handling-interrupts" title="제목에 대한 직접 링크">​</a></h3><p>작업 중에는 인터럽트에 대한 응답으로 실행되는 작업도 있는데, 블루투스 통신 작업도 여기에 해당합니다. 예를 들어 블루투스 칩에 새로운 패키지가 있을 때 블루투스 통신 작업을 실행하려고 합니다. 이러한 경우에 인터럽트가 발생한다고 가정하면 인터럽트 핸들러에서 메시지를 보낼 수 있습니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">BT_DataAvailable_Handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">os_send_message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bt_data_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_available_message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대기열 외에 다른 동기화 서비스도 사용할 수 있습니다. 예를 들어 세마포어와 뮤텍스도 여러 운영 체제에서 발견됩니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="freertos">FreeRTOS<a class="hash-link" href="#freertos" title="제목에 대한 직접 링크">​</a></h3><p>TouchGFX는 개발 과정에서 FreeRTOS 운영 체제로 테스트됩니다. TouchGFX는 요구 사항이 거의 없어서 여러 운영 체제에서 실행이 가능하지만 구체적인 요건이 없다면 FreeRTOS가 좋은 출발점이 될 수 있습니다.</p><p>FreeRTOS는 상용 애플리케이션에서 무료로 사용할 수 있는 간단한 운영 체제입니다. 이 운영 체제는 STM32Cube 펌웨어와 함께 소스 코드로 제공되며, 이 펌웨어에는 언제든지 사용할 수 있는 STM32 마이크로컨트롤러 예제 코드도 포함되어 있습니다.</p><p>FreeRTOS에 대한 자세한 내용과 라이선스 조건은 <a href="https://www.freertos.org/" target="_blank" rel="noopener noreferrer">freertos.org</a>를 참조하십시오.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="touchgfx-os-wrappers">TouchGFX OS Wrappers<a class="hash-link" href="#touchgfx-os-wrappers" title="제목에 대한 직접 링크">​</a></h3><p>TouchGFX는 기본적으로 FreeRTOS에서 실행되며, 단일 메시지 대기열을 사용해 디스플레이 컨트롤러와 동기화하고, 세마포어를 사용해 프레임버퍼에 대한 액세스를 보호합니다.</p><p>이것을 처리하는 것은 <code>touchgfx/os/OSWrappers.cpp</code>에서 정의한 OSWrappers 클래스입니다. 이 클래스에서 사용하는 메소드는 다음과 같습니다.</p><table><thead><tr><th>메소드</th><th>표현</th></tr></thead><tbody><tr><td>signalVSync()</td><td>이 메소드는 디스플레이가 다음 프레임을 위한 준비를 마쳤을 때 디스플레이 드라이버에서 호출되어야 합니다.</td></tr><tr><td>waitForVSync()</td><td>대기하기 위해 그래픽 엔진에서 호출되며, signalVSync가 호출될 때까지 반환해서는 안 됩니다.</td></tr><tr><td>isVSyncAvailable()</td><td>(선택 사항) VSync가 발생하면 true를 반환합니다. waitForVSync에서의 차단을 방지하는 데 사용됩니다.</td></tr><tr><td>signalRenderingDone()</td><td>(선택 사항) 대기 중인 VSync 신호를 모두 제거합니다.</td></tr><tr><td>takeFrameBufferSemaphore()</td><td>그래픽 엔진과 가속기에서 프레임버퍼에 대한 직접 액세스 권한을 얻을 목적으로 호출됩니다.</td></tr><tr><td>giveFrameBufferSemaphore()</td><td>직접 액세스 권한을 다시 해제할 목적으로 호출됩니다.</td></tr></tbody></table><p>기본 구현체는 메시지 대기열을 사용해 VSync(프레임) 동기화를 구현합니다. 그래픽 엔진 작업은 다음 VSync가 수신될 때까지 대기합니다.</p><p>이 OSWrapper 클래스는 TouchGFX Generator에서 생성됩니다. Read more about the Generator <a href="/4.21/ko/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/driver#real-time-operating-system">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="no-rtos">RTOS 미사용<a class="hash-link" href="#no-rtos" title="제목에 대한 직접 링크">​</a></h2><p>TouchGFX는 운영 체제 없이도 실행이 가능합니다. 다만, 이때는 main에서 직접 그래픽 엔진 메인 루프를 시작해야 합니다.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">taskEntry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//never returns</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>RTOS를 사용하지 않는다고 해서 TouchGFX의 성능이 떨어지는 것은 아닙니다. 다만 MCU 부하가 증가하여 TouchGFX와 함께 다른 작업을 실행하기가 더욱 어려워질 수 있습니다.</p><p>위에서도 설명했지만 이때는 main에서 사용자 인터페이스가 실행 중일 때 다른 작업을 수동으로 실행해야 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modeltick">Model::tick<a class="hash-link" href="#modeltick" title="제목에 대한 직접 링크">​</a></h3><p>한 가지 방법은 모든 프레임마다 한 번씩 Model 클래스에서 작업 확인을 수행하는 것입니다.</p><div class="code-header"><div><h5>Model.cpp</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Model</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//run other tasks here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">music_task_tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">bluetooth_task_tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 메소드를 사용하면 모든 작업이 프레임마다 한 번씩 실행됩니다. 그러면 작업 소요 시간이 사용자 인터페이스의 렌더링 시간에 추가됩니다. 간단한 방법이기 때문에 모든 작업이 빠르게 종료될 수 있는 단순 시스템이라면 수용할 만한 해결책입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oswrappers">OSWrappers<a class="hash-link" href="#oswrappers" title="제목에 대한 직접 링크">​</a></h3><p>이 외에 OSWrappers 클래스에서 후크를 사용하는 방법도 있습니다. 위에서 설명했듯이 그래픽 엔진은 이벤트를 기다려야 할 때 이 클래스에서 메소드를 호출합니다. 이벤트를 기다릴 때 다음과 같은 메소드로 다른 작업을 실행할 수 있습니다.</p><div class="code-header"><div><h5>OSWrappers.cpp</h5></div></div><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">volatile</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token plain"> vsync_sem </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">signalVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    vsync_sem </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">waitForVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    vsync_sem </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//clear the flag, so we wait for the next vsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Perform other work while waiting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">music_task_tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">bluetooth_task_tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">while</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">vsync_sem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사하기" title="복사하기" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 메소드를 사용하면 다른 작업에서 프레임 간 유휴 작업을 모두 사용할 수 있지만 작업에 소요되는 시간에는 차이가 있습니다.</p><p>그 밖에 OSWrappers::isVSyncAvailable 함수와 OSWrappers::signalRenderingDone 함수를 사용하는 방법도 있습니다. 이 경우 애플리케이션이 다수의 while-루프를 피할 수 있습니다. 두 함수는 운영 체제가 없는 구성을 선택했을 때 TouchGFX Generator에서 사용됩니다.</p><p>이때는 작업을 1밀리초 정도의 단계로 세분화하여 나눌 수 있다는 점이 중요합니다. 그렇지 않으면 사용자 인터페이스의 성능이 떨어지기 때문입니다.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="문서 페이지 탐색하기"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.21/ko/docs/basic-concepts/performance"><div class="pagination-nav__sublabel">이전 페이지</div><div class="pagination-nav__label">성능</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.21/ko/docs/basic-concepts/memory-usage"><div class="pagination-nav__sublabel">다음 페이지</div><div class="pagination-nav__label">메모리 사용량</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">서론</a><ul><li><a href="#interleaving-other-tasks-with-the-user-interface" class="table-of-contents__link toc-highlight">다른 작업과 사용자 인터페이스의 교차 실행</a></li><li><a href="#an-example" class="table-of-contents__link toc-highlight">예시</a></li></ul></li><li><a href="#rtos" class="table-of-contents__link toc-highlight">RTOS</a><ul><li><a href="#task-communication" class="table-of-contents__link toc-highlight">작업 통신</a></li><li><a href="#handling-interrupts" class="table-of-contents__link toc-highlight">인터럽트 처리</a></li><li><a href="#freertos" class="table-of-contents__link toc-highlight">FreeRTOS</a></li><li><a href="#touchgfx-os-wrappers" class="table-of-contents__link toc-highlight">TouchGFX OS Wrappers</a></li></ul></li><li><a href="#no-rtos" class="table-of-contents__link toc-highlight">RTOS 미사용</a><ul><li><a href="#modeltick" class="table-of-contents__link toc-highlight">Model::tick</a></li><li><a href="#oswrappers" class="table-of-contents__link toc-highlight">OSWrappers</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">이용약관</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">개인정보보호정책</a> | <a href="/docs/miscellaneous/cookie-policy">쿠키정책</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">권리행사</a></div></div></div></footer></div></div>
<script src="/4.21/ko/assets/js/runtime~main.9a3e1987.js"></script>
<script src="/4.21/ko/assets/js/main.9f769501.js"></script>
</body>
</html>